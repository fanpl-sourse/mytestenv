(window.webpackJsonplizard_service_file_header=window.webpackJsonplizard_service_file_header||[]).push([[0],{935:function(e,t,n){var i=n(936),a=n(143),r=n(206),o=n(204),l=n(299),s=r(function(e,t){var n=l(t);return o(n)&&(n=void 0),o(e)?i(e,a(t,1,o,!0),void 0,n):[]});e.exports=s},936:function(e,t,n){var u=n(296),h=n(575),b=n(576),f=n(142),g=n(205),v=n(297);e.exports=function(e,t,n,i){var a=-1,r=h,o=!0,l=e.length,s=[],c=t.length;if(!l)return s;n&&(t=f(t,g(n))),i?(r=b,o=!1):200<=t.length&&(r=v,o=!1,t=new u(t));e:for(;++a<l;){var d=e[a],p=null==n?d:n(d),d=i||0!==d?d:0;if(o&&p==p){for(var m=c;m--;)if(t[m]===p)continue e;s.push(d)}else r(t,p,i)||s.push(d)}return s}},937:function(e,t,n){e.exports=n.p+"static/lizard-service-file-header/assets/back_arrow.597e5674.png"},938:function(e,t,n){e.exports=n.p+"static/lizard-service-file-header/assets/panel_x_hover.0559e3b8.png"},939:function(e,t,n){e.exports=n.p+"static/lizard-service-file-header/assets/panel_x.da3ecace.png"},940:function(e,t,n){e.exports=n.p+"static/lizard-service-file-header/assets/search.18617807.png"},941:function(e,t,n){e.exports=n.p+"static/lizard-service-file-header/assets/search_x.f809fa4c.png"},942:function(e,t,n){e.exports=n.p+"static/lizard-service-file-header/assets/search_x_hover.2142bc9f.png"},943:function(e,t,n){e.exports=n.p+"static/lizard-service-file-header/assets/warning.e08808a0.png"},944:function(e,t,n){e.exports=n.p+"static/lizard-service-file-header/assets/department.17a72ed8.png"},945:function(e,t,n){e.exports=n.p+"static/lizard-service-file-header/assets/checker.0fa9eb7b.png"},946:function(e,t,n){e.exports=n.p+"static/lizard-service-file-header/assets/reminder.ceced65b.png"},947:function(e,t,n){e.exports=n.p+"static/lizard-service-file-header/assets/enterprise.1a024eb6.png"},948:function(e,t,n){e.exports=n.p+"static/lizard-service-file-header/assets/question_mark.c794b9e0.png"},949:function(e,t,n){e.exports=n.p+"static/lizard-service-file-header/assets/plus.67366101.png"},950:function(e,t,n){e.exports=n.p+"static/lizard-service-file-header/assets/parent_folder.60c8f8c1.png"},951:function(e,t,n){e.exports=n.p+"static/lizard-service-file-header/assets/add_collab.2173f9d7.png"},952:function(e,t,n){e.exports=n.p+"static/lizard-service-file-header/assets/wechat.29b2360a.png"},953:function(e,t,n){e.exports=n.p+"static/lizard-service-file-header/assets/setting.7e610105.png"},954:function(e,t,n){"use strict";n.r(t);var A=n(2),B=n(0),L=n.n(B),i=n(4),a=n.n(i),r=n(1),M=n.n(r);function y(e){return"edit"===e?M()("可以编辑"):"comment"===e?M()("只能评论"):"read"===e?M()("只能阅读"):"none"===e?M()("禁止访问"):"admin"===e?M()("管理者"):M()("添加权限")}var o,N=/Android|webOS|iPhone|iPad/i.test(navigator.userAgent),l=a.a.div(Object(A.__makeTemplateObject)(["\n  height: 36px;\n  width: 100%;\n  display: inline-block;\n  line-height: 18px;\n  position: relative;\n  font-size: 16px;\n  font-weight: ",";\n  color: ",";\n"],["\n  height: 36px;\n  width: 100%;\n  display: inline-block;\n  line-height: 18px;\n  position: relative;\n  font-size: 16px;\n  font-weight: ",";\n  color: ",";\n"]),function(e){return e.isMobile?"500":"bold"},function(e){return e.isMobile?"#494949":"inherit"}),s=a.a.div(Object(A.__makeTemplateObject)(["\n  position: absolute;\n  top: 19px;\n  height: 20px;\n  width: 20px;\n  right: ",";\n"],["\n  position: absolute;\n  top: 19px;\n  height: 20px;\n  width: 20px;\n  right: ",";\n"]),function(e){return e.isMobile?"-12px":"-20px"}),D=(o=L.a.Component,Object(A.__extends)(c,o),c.prototype.componentDidMount=function(){var t=this;setTimeout(function(){var e=t.ref.current;e&&e.scrollHeight>e.clientHeight&&t.setState({textOverflow:!0})},0)},c.prototype.render=function(){var t=this,e=this.props,n=e.children,i=e.styles,a=this.state.textOverflow;return L.a.createElement(l,{isMobile:N,style:i,innerRef:function(e){return t.ref=e}},n,a&&L.a.createElement(s,{isMobile:N},"..."))},c);function c(){var e=null!==o&&o.apply(this,arguments)||this;return e.ref=L.a.createRef(),e.state={textOverflow:!1},e}var d,_=n(11),p=n(937),m=n.n(p),u="icon_back_arrow";Object(_.minify)(!1);var h=_.StyleSheet.create(((d={})[u]={display:"inline-block",verticalAlign:"middle"},d));function b(e){var t=e.style,n=void 0===t?{}:t;return L.a.createElement("img",{src:m.a,height:"16",width:"16",className:Object(_.css)(h[u]),style:n})}Object(_.minify)(!1);var f,g=_.StyleSheet.create({back_button:{lineHeight:"18px",cursor:"pointer"},back_button_text:{fontSize:"16px",marginLeft:"29px"}}),T=(f=L.a.Component,Object(A.__extends)(v,f),v.prototype.render=function(){return L.a.createElement("div",{className:Object(_.css)(g.back_button),onClick:this.handleClick},L.a.createElement(b,{style:{position:"absolute",left:"0",top:"1px"}}),L.a.createElement("span",{className:Object(_.css)(g.back_button_text)},M()("返回")))},v);function v(){var n=null!==f&&f.apply(this,arguments)||this;return n.handleClick=function(e){var t=n.props.onClick;t&&t()},n}var x,E=n(938),w=n.n(E),k="icon_panel_x_hover";Object(_.minify)(!1);var O=_.StyleSheet.create(((x={})[k]={display:"inline-block",verticalAlign:"middle"},x));function j(e){var t=e.style,n=void 0===t?{}:t;return L.a.createElement("img",{src:w.a,height:"12",width:"12",className:Object(_.css)(O[k]),style:n})}var C,S=n(939),R=n.n(S),I="icon_panel_x";Object(_.minify)(!1);var P=_.StyleSheet.create(((C={})[I]={display:"inline-block",verticalAlign:"middle"},C));function H(e){var t=e.style,n=void 0===t?{}:t;return L.a.createElement("img",{src:R.a,height:"12",width:"12",className:Object(_.css)(P[I]),style:n})}Object(_.minify)(!1);var z,V=_.StyleSheet.create({x_button:{position:"relative",display:"inline-block",width:"12px",height:"12px",cursor:"pointer"},x_button_visible:{position:"absolute",top:"0",left:"0",width:"12px",height:"12px",visibility:"visible"},x_button_hidden:{position:"absolute",top:"0",left:"0",visibility:"hidden"}}),F=(z=L.a.Component,Object(A.__extends)(W,z),W.prototype.componentDidMount=function(){var e=this.props.getInnerRef,t=this.XButtonRef;e&&t&&e(t)},W.prototype.render=function(){var e=this.state.hover,t=this.XButtonRef,n=this.props.style,i=void 0===n?{}:n;return L.a.createElement("div",{className:Object(_.css)(V.x_button),onClick:this.handleClick,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,ref:t,style:i},L.a.createElement("div",{className:Object(_.css)(e?V.x_button_visible:V.x_button_hidden)},L.a.createElement(j,{style:{position:"absolute",left:"0",top:"0"}})),L.a.createElement("div",{className:Object(_.css)(e?V.x_button_hidden:V.x_button_visible)},L.a.createElement(H,{style:{position:"absolute",left:"0",top:"0"}})))},W);function W(){var n=null!==z&&z.apply(this,arguments)||this;return n.XButtonRef=L.a.createRef(),n.state={hover:!1},n.handleClick=function(e){var t=n.props.onClick;t&&t(e)},n.handleMouseEnter=function(e){n.setState({hover:!0})},n.handleMouseLeave=function(e){n.setState({hover:!1})},n}var X,U=n(940),Y=n.n(U),G="icon_search";Object(_.minify)(!1);var K=_.StyleSheet.create(((X={})[G]={display:"inline-block",verticalAlign:"middle"},X));function q(){return L.a.createElement("img",{src:Y.a,height:"14",width:"14",className:Object(_.css)(K[G])})}var J,Z=n(29),$=a.a.div(Object(A.__makeTemplateObject)(["\n  display: inline-block;\n  width: ",";\n  height: 14px;\n  line-height: 14px;\n  vertical-align: middle;\n  position: relative;\n  background-color: white;\n  margin-left: 7px;\n"],["\n  display: inline-block;\n  width: ",";\n  height: 14px;\n  line-height: 14px;\n  vertical-align: middle;\n  position: relative;\n  background-color: white;\n  margin-left: 7px;\n"]),function(e){return e.isMobile?"250px":"335px"}),Q=a.a.input(Object(A.__makeTemplateObject)(["\n  position: absolute;\n  left: 0;\n  top: 0;\n  border: none;\n  width: 100%;\n  height: 14px;\n  line-height: 14px;\n  color: black;\n  outline: none;\n\n  &::placeholder {\n    line-height: 14px;\n    color: #ccc;\n  }\n"],["\n  position: absolute;\n  left: 0;\n  top: 0;\n  border: none;\n  width: 100%;\n  height: 14px;\n  line-height: 14px;\n  color: black;\n  outline: none;\n\n  &::placeholder {\n    line-height: 14px;\n    color: #ccc;\n  }\n"])),ee=(J=L.a.Component,Object(A.__extends)(te,J),te.prototype.render=function(){var e=this.getPlaceholderText();return L.a.createElement($,{isMobile:N,"data-test":"search_input_wrapper"},L.a.createElement(Q,{innerRef:this.onRef,onKeyUp:this.handleKeyUp,onBlur:this.handleInputBlur,onCompositionStart:this.handleCompositionStart,onCompositionEnd:this.handleCompositionEnd,"data-test":"search_input",placeholder:e}))},te);function te(){var r=null!==J&&J.apply(this,arguments)||this;return r.inputRef=L.a.createRef(),r.state={focused:!1,text:"",composition:!1},r.handleClickOnPlaceholder=function(e){},r.handleKeyUp=function(e){r.state.composition||r.setText(e)},r.handleInputBlur=function(e){},r.handleCompositionStart=function(){r.setState({composition:!0})},r.handleCompositionEnd=function(e){r.setState({composition:!1}),r.setText(e)},r.setText=function(e){var t=e.target,n=r.props.onInput,i=t.value.trim();r.setState({text:i});var a=r.inputRef.current;a&&a.setAttribute("value",i),null!=n&&n(i)},r.getPlaceholderText=function(){var e=r.props.isEnterpriseVersion,t=Object(Z.isSelfHosted)()?e?M()("输入 姓名 / 邮箱 / 部门 添加协作权限"):M()("输入 姓名 / 邮箱 添加协作权限"):e?M()("输入 姓名 / 邮箱 / 手机号 / 部门 添加协作权限"):M()("输入 姓名 / 邮箱 / 手机号 添加协作权限");return t},r.onRef=function(e){r.inputRef={current:e}},r}var ne,ie=n(941),ae=n.n(ie),re="icon_search_x";Object(_.minify)(!1);var oe=_.StyleSheet.create(((ne={})[re]={display:"inline-block",verticalAlign:"middle"},ne));function le(){return L.a.createElement("img",{src:ae.a,height:"12",width:"12",className:Object(_.css)(oe[re])})}var se,ce=n(942),de=n.n(ce),pe="icon_search_x_hover";Object(_.minify)(!1);var me=_.StyleSheet.create(((se={})[pe]={display:"inline-block",verticalAlign:"middle"},se));function ue(){return L.a.createElement("img",{src:de.a,height:"12",width:"12",className:Object(_.css)(me[pe])})}Object(_.minify)(!1);var he,be=_.StyleSheet.create({searchbox_x_button_wrapper:{display:"inline-block",width:"14px",height:"14px",verticalAlign:"middle",cursor:"pointer",position:"absolute",top:"8px",right:"5px"},searchbox_x_button:{width:"12px",height:"12px",position:"absolute",left:"0",top:"0",visibility:"hidden"},searchbox_x_button_visible:{visibility:"visible"}}),fe=(he=L.a.Component,Object(A.__extends)(ge,he),ge.prototype.render=function(){var e=this.state.hover;return L.a.createElement("div",{className:Object(_.css)(be.searchbox_x_button_wrapper),onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,onClick:this.handleClick},L.a.createElement("div",{className:Object(_.css)(be.searchbox_x_button,!e&&be.searchbox_x_button_visible)},L.a.createElement(le,null)),L.a.createElement("div",{className:Object(_.css)(be.searchbox_x_button,e&&be.searchbox_x_button_visible)},L.a.createElement(ue,null)))},ge);function ge(){var n=null!==he&&he.apply(this,arguments)||this;return n.state={hover:!1},n.handleMouseEnter=function(e){n.setState({hover:!0})},n.handleMouseLeave=function(e){n.setState({hover:!1})},n.handleClick=function(e){var t=n.props.onClick;t&&t()},n}Object(_.minify)(!1);var ve,xe=_.StyleSheet.create({searchbox:{height:"16px",padding:"8px 0 8px 11px",background:"#FFFFFF",border:"1px solid #A5A5A5",boxShadow:"inset 0 1px 4px 0 #E5E5E5",position:"relative",lineHeight:"14px"}}),_e=(ve=L.a.Component,Object(A.__extends)(Ee,ve),Ee.prototype.render=function(){var e=this.state,t=e.inputVersion,n=e.showXButton,i=this.props.isEnterpriseVersion;return L.a.createElement("div",{className:Object(_.css)(xe.searchbox)},L.a.createElement(q,null),L.a.createElement(ee,{key:t,isEnterpriseVersion:i,onInput:this.handleInput}),n?L.a.createElement(fe,{onClick:this.handleXButtonClick}):null)},Ee);function Ee(){var i=null!==ve&&ve.apply(this,arguments)||this;return i.state={inputVersion:1,showXButton:!1},i.handleXButtonClick=function(){var e=i.state.inputVersion,t=i.props.onInput;i.setState({inputVersion:e+1,showXButton:!1}),t&&t("")},i.handleInput=function(e){var t=i.props.onInput,n=i.state.showXButton;t&&t(e),0<e.length&&!n&&i.setState({showXButton:!0}),e.length<=0&&n&&i.setState({showXButton:!1})},i}var we,ke=n(380),Oe=n(948),ye=n.n(Oe),je="icon_question";Object(_.minify)(!1);var Ce=_.StyleSheet.create(((we={})[je]={display:"block",verticalAlign:"middle"},we));function Se(e){var t=e.style,n=void 0===t?{}:t;return L.a.createElement("img",{src:ye.a,height:"14",width:"14",className:Object(_.css)(Ce[je]),style:n})}var Re,Me=n(949),De=n.n(Me),Te="icon_plus";Object(_.minify)(!1);var Ie=_.StyleSheet.create(((Re={})[Te]={display:"block",verticalAlign:"middle",marginRight:"5px"},Re));function Ae(e){var t=e.style,n=void 0===t?{}:t;return L.a.createElement("img",{src:De.a,height:"12",width:"12",className:Object(_.css)(Ie[Te]),style:n})}function Be(t){var e=t.title,n=t.showButton,i=t.handleButtonClick,a=t.buttonText,r=t.styles,o=t.popConfirmTitle,l=t.popConfirmContent;return L.a.createElement(Le,{isMobile:N,style:r,innerRef:function(e){t.headRef;return e}},L.a.createElement(Ne,{isMobile:N},L.a.createElement("span",null,e),L.a.createElement(ke.a,{title:o,content:l,trigger:"hover",placement:"right",withButton:!1},L.a.createElement(ze,null,L.a.createElement(Se,null))),n&&L.a.createElement(Pe,{onClick:i,"data-test":"list_head_tail"},L.a.createElement(He,{"data-test":"list_head_add_button"},L.a.createElement(Ae,null)),L.a.createElement("span",null,a))))}var Le=a.a.div(Object(A.__makeTemplateObject)(["\n  background-color: #fff;\n  padding-top: 6px;\n  padding-bottom: 0;\n  padding-left: ",";\n  padding-right: ",";\n  z-index: 999;\n  width: ",";\n"],["\n  background-color: #fff;\n  padding-top: 6px;\n  padding-bottom: 0;\n  padding-left: ",";\n  padding-right: ",";\n  z-index: 999;\n  width: ",";\n"]),function(e){return e.isMobile?"0":"30px"},function(e){return e.isMobile?"0":"30px"},function(e){return e.isMobile?"100%":"auto"}),Ne=a.a.div(Object(A.__makeTemplateObject)(["\n  color: #8a8a8a;\n  border-bottom: 1px solid #ddd;\n  padding: 0 10px 4px;\n  position: relative;\n  height: 17px;\n  width: ",";\n"],["\n  color: #8a8a8a;\n  border-bottom: 1px solid #ddd;\n  padding: 0 10px 4px;\n  position: relative;\n  height: 17px;\n  width: ",";\n"]),function(e){return e.isMobile?"auto":"450px"}),Pe=a.a.div(Object(A.__makeTemplateObject)(["\n  color: #6da0e3;\n  float: right;\n  position: relative;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  margin-right: 5px;\n"],["\n  color: #6da0e3;\n  float: right;\n  position: relative;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  margin-right: 5px;\n"])),He=a.a.span(Object(A.__makeTemplateObject)(["\n  float: left;\n"],["\n  float: left;\n"])),ze=a.a.div(Object(A.__makeTemplateObject)(["\n  width: 13px;\n  height: 13px;\n  cursor: pointer;\n  display: inline-block;\n  margin-left: 5px;\n  margin-bottom: -2px;\n\n  circle {\n    fill: #eee;\n\n    &:hover {\n      fill: #d9dadb;\n    }\n  }\n"],["\n  width: 13px;\n  height: 13px;\n  cursor: pointer;\n  display: inline-block;\n  margin-left: 5px;\n  margin-bottom: -2px;\n\n  circle {\n    fill: #eee;\n\n    &:hover {\n      fill: #d9dadb;\n    }\n  }\n"]));Object(_.minify)(!1);var Ve,Fe=_.StyleSheet.create({scroll_list_wrapper:{position:"relative",display:"inline-block",userSelect:"none"},scroll_list:{overflow:"hidden"},scroll_button_wrapper:{position:"absolute",width:"6px",height:"100%",top:"0",right:"0",transitionProperty:"width, background-color",transitionDuration:"200ms",backgroundColor:"rgba(0, 0, 0, 0)",pointer:"cursor"},scroll_button_wrapper_hover:{width:"10px",backgroundColor:"rgba(0, 0, 0, 0.1)"},scroll_button_wrapper_hidden:{visibility:"hidden"},scroll_button:{position:"absolute",width:"6px",height:"20px",backgroundColor:"#333",top:"0",right:"0",borderRadius:"3px",opacity:.7,transitionProperty:"width, border-radius",transitionDuration:"200ms"},scroll_button_hover:{width:"10px",borderRadius:"5px"}}),We=0,Xe=(Ve=L.a.Component,Object(A.__extends)(Ue,Ve),Ue.prototype.componentDidMount=function(){var e=this;setTimeout(function(){e.setScrollBarWrapperVisible(),setTimeout(function(){e.setScrollBarButtonHeight(),e.initListPosition(),e.watchScrollAreaChange()}),e.mountHandleWheel()},0),document.addEventListener("mouseup",this.handleScrollButtonMouseUp),document.addEventListener("mousemove",this.handleScrollButtonMouseMove)},Ue.prototype.componentWillUnmount=function(){document.removeEventListener("mouseup",this.handleScrollButtonMouseUp),document.removeEventListener("mousemove",this.handleScrollButtonMouseMove),this.listRef.current&&(this.listRef.current.removeEventListener("touchstart",this.handleTouchStart),this.listRef.current.removeEventListener("touchmove",this.handleTouchMove),this.listRef.current.removeEventListener("touchend",this.handleTouchEnd))},Ue.prototype.render=function(){var e=this.state,t=e.scrollButtonWrapperExpanded,n=e.scrollButtonWrapperVisible,i=this.props,a=i.children,r=i.height,o=i.width,l=void 0===o?"100px":o,s=i.wrapperHeight,c=void 0===s?"auto":s,d=i.maxHeight;return L.a.createElement("div",{className:Object(_.css)(Fe.scroll_list_wrapper),style:{width:l,height:c}},L.a.createElement("div",{className:Object(_.css)(Fe.scroll_list),ref:this.listRef,style:{height:r,maxHeight:d}},a),L.a.createElement("div",{className:Object(_.css)(Fe.scroll_button_wrapper,t&&Fe.scroll_button_wrapper_hover,!n&&Fe.scroll_button_wrapper_hidden),ref:this.scrollButtonWrapperRef,onMouseEnter:this.handleScrollButtonWrapperMouseEnter,onMouseLeave:this.handleScrollButtonWrapperMouseLeave,onMouseDown:this.handleScrollButtonWrapperMouseDown},L.a.createElement("div",{className:Object(_.css)(Fe.scroll_button,t&&Fe.scroll_button_hover),ref:this.scrollButtonRef,onMouseDown:this.handleScrollButtonMouseDown})))},Ue);function Ue(){var r=null!==Ve&&Ve.apply(this,arguments)||this;return r.scrollButtonWrapperRef=L.a.createRef(),r.scrollButtonRef=L.a.createRef(),r.listRef=L.a.createRef(),r.listPosition=null,r.scrollButtonHeight=0,r.scrollButtonMinHeight=20,r.touchStartPoint=0,r.touchStartScrollTop=0,r.listPrevScrollTop=0,r.state={scrollButtonPressed:!1,scrollButtonWrapperExpanded:!1,scrollButtonWrapperVisible:!1},r.handleWheel=function(e){var t=r.listRef.current;t&&(e.preventDefault(),t.scrollTop+=e.deltaY,t.scrollTop!==r.listPrevScrollTop&&(r.listPrevScrollTop=t.scrollTop,e.stopPropagation()),setTimeout(r.setScrollButtonPosition,0))},r.initListPosition=function(){var e,t=r.scrollButtonWrapperRef.current;t&&(e=t.getBoundingClientRect(),r.listPosition={top:e.top,height:e.height})},r.setScrollBarButtonHeight=function(){var e,t,n=r.listRef.current,i=r.scrollButtonRef.current,a=r.scrollButtonWrapperRef.current;n&&i&&a&&(e=n.clientHeight,t=n.scrollHeight,r.scrollButtonHeight=e*(e/t),r.scrollButtonHeight<r.scrollButtonMinHeight&&(r.scrollButtonHeight=r.scrollButtonMinHeight),i.style.height=r.scrollButtonHeight+"px")},r.setScrollBarWrapperVisible=function(){var e=r.listRef.current;e&&(e.scrollHeight>e.clientHeight?r.setState({scrollButtonWrapperVisible:!0}):r.setState({scrollButtonWrapperVisible:!1}))},r.setScrollBarTo=function(e,t){var n,i=r.scrollButtonRef.current,a=r.listRef.current;r.listPosition&&i&&a&&((n=e-r.listPosition.top-r.scrollButtonHeight/2)<=0&&(n=0),n>=r.listPosition.height-r.scrollButtonHeight&&(n=r.listPosition.height-r.scrollButtonHeight),i.style.transform="translateY("+n+"px)",a.scrollTop=a.scrollHeight*(n/(r.listPosition.height-r.scrollButtonHeight)),t&&t())},r.setScrollButtonPosition=function(){var e,t,n=r.listRef.current;n&&(e=r.scrollButtonRef.current,r.listPosition&&e&&((t=n.scrollTop/(n.scrollHeight-n.clientHeight)*(r.listPosition.height-r.scrollButtonHeight))>=r.listPosition.height-r.scrollButtonHeight&&(t=r.listPosition.height-r.scrollButtonHeight),e.style.transform="translateY("+t+"px)"))},r.watchScrollAreaChange=function(){var e=r.listRef.current;e&&e.offsetParent&&We!==e.scrollHeight?setTimeout(function(){r.setScrollBarWrapperVisible(),setTimeout(function(){r.setScrollBarButtonHeight(),setTimeout(function(){r.setScrollButtonPosition(),We=e.scrollHeight,setTimeout(r.watchScrollAreaChange,100)},0)},0)},0):setTimeout(r.watchScrollAreaChange,100)},r.handleScrollButtonMouseDown=function(e){r.state.scrollButtonPressed||r.setState({scrollButtonPressed:!0})},r.handleScrollButtonMouseMove=function(e){r.state.scrollButtonPressed&&r.setScrollBarTo(e.clientY)},r.handleScrollButtonMouseUp=function(e){r.state.scrollButtonPressed&&r.setState({scrollButtonPressed:!1,scrollButtonWrapperExpanded:e.target===r.scrollButtonRef.current})},r.handleScrollButtonWrapperMouseEnter=function(e){r.setState({scrollButtonWrapperExpanded:!0})},r.handleScrollButtonWrapperMouseLeave=function(e){r.state.scrollButtonPressed||r.setState({scrollButtonWrapperExpanded:!1})},r.handleScrollButtonWrapperMouseDown=function(e){var t=r.state.scrollButtonWrapperExpanded;e.target!==r.scrollButtonRef.current&&t&&r.setScrollBarTo(e.clientY,function(){r.handleScrollButtonMouseDown(e)})},r.handleTouchStart=function(e){r.touchStartPoint=e.touches[0].pageY;var t=r.listRef.current;t&&(r.touchStartScrollTop=t.scrollTop)},r.handleTouchMove=function(e){e.preventDefault();var t=r.listRef.current;t&&(t.scrollTop=r.touchStartScrollTop+2*(r.touchStartPoint-e.touches[0].pageY),setTimeout(r.setScrollButtonPosition,0))},r.handleTouchEnd=function(){r.touchStartPoint=0,r.touchStartScrollTop=0},r.mountHandleWheel=function(){r.listRef.current&&(r.listRef.current.addEventListener("wheel",r.handleWheel),r.listRef.current.addEventListener("touchstart",r.handleTouchStart),r.listRef.current.addEventListener("touchmove",r.handleTouchMove),r.listRef.current.addEventListener("touchend",r.handleTouchEnd))},r}var Ye,Ge=n(950),Ke=n.n(Ge),qe="icon_parent_folder";Object(_.minify)(!1);var Je=_.StyleSheet.create(((Ye={})[qe]={display:"inline-block",verticalAlign:"middle"},Ye));function Ze(){return L.a.createElement("img",{src:Ke.a,height:"28",width:"28",className:Object(_.css)(Je[qe])})}var $e,Qe=n(13),et=($e=L.a.Component,Object(A.__extends)(tt,$e),tt.prototype.componentDidMount=function(){this.portalWrapper=document.createElement("div"),document.body.appendChild(this.portalWrapper),this.setPosition(),window.addEventListener("resize",this.setPosition)},tt.prototype.componentWillUnmount=function(){this.portalWrapper&&document.body.removeChild(this.portalWrapper),window.removeEventListener("resize",this.setPosition)},tt.prototype.render=function(){var e=this.props.children,t=this.portalWrapper,n=this.state.refPosition;return t?n?Object(Qe.createPortal)(e(n),t):Object(Qe.createPortal)(e(),t):null},tt);function tt(){var t=null!==$e&&$e.apply(this,arguments)||this;return t.state={refPosition:null},t.portalWrapper=null,t.setPosition=function(){var e=t.props.innerRef;e&&e.current&&t.setState({refPosition:e.current.getBoundingClientRect()})},t}function nt(e,t){return fetch(__RUNTIME_ENV__.API_PATH+e+function(e){var t,n;if(!e)return"";var i=[];try{for(var a=Object(A.__values)(Object.keys(e)),r=a.next();!r.done;r=a.next()){var o=r.value;i.push(encodeURIComponent(o)+"="+encodeURIComponent(e[o]))}}catch(e){t={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}return 0<i.length?"?"+i.join("&"):""}(t),{method:"GET",credentials:"same-origin",headers:{"cache-control":"no-cache",pragma:"no-cache"}}).then(function(e){return 0===e.status||400<=e.status?e.json().then(function(e){return Promise.reject(e)}):e.json()})}function it(e,t,n){return fetch(__RUNTIME_ENV__.API_PATH+t,{method:e,headers:{"Content-Type":"application/json","cache-control":"no-cache",pragma:"no-cache"},body:n?JSON.stringify(n):void 0,credentials:"same-origin"}).then(function(e){return 0===e.status||400<=e.status?e.json().then(function(e){return Promise.reject(e)}):204===e.status?null:e.json()})}function at(e,t){return it("POST",e,t)}function rt(e,t){return it("PUT",e,t)}function ot(e,t){return it("DELETE",e,t)}function lt(e,t){return it("PATCH",e,t)}function st(e,t){return t?"admin":"editor"===e?"edit":"commentator"===e?"comment":"reader"===e?"read":"none"===e?"none":null}function ct(e){return e.reduce(function(e,t){return 0<e.length&&e.push(" - "),e.push(t.name),e},[]).join("")}function dt(e,t){var n=[],i=[];return e.forEach(function(e){e.departmentId?n.push({id:e.id,name:e.name,description:ct(e.departments),role:st(e.role,t),isDepartment:!0,isOutsider:!1,isInherited:e.isInherited,avatar:"",disabled:!1}):i.push({id:e.id,name:e.name,description:e.email||e.mobileAccount||e.mobile,role:st(e.role,t),isDepartment:!1,isOutsider:e.isOutsider,isInherited:e.isInherited,avatar:e.avatar,disabled:"disabled"===e.teamRole,email:e.email,teamId:e.teamId,status:e.status})}),n.concat(i)}var pt=n(935),mt=n.n(pt);function ut(t){return void 0===t&&(t=1),Object(A.__awaiter)(this,void 0,void 0,function(){return Object(A.__generator)(this,function(e){switch(e.label){case 0:return[4,nt("/teams/mine/members?pagination=true&page="+t+"&perPage=20")];case 1:return[2,e.sent()]}})})}function ht(l,s,c,d,p){return Object(A.__awaiter)(this,void 0,void 0,function(){var o;return Object(A.__generator)(this,function(e){switch(e.label){case 0:return[4,at("/search?type="+("recent_contact,team_member"+(p?",department":""))+"&page=0&pageSize=100",{guid:l,keyword:s,teamId:c,fileId:d})];case 1:return o=e.sent(),[2,(n=(t=o).department,i=t.recent_contact,a=t.team_member,r=(n?n.results.map(function(e){return{id:e.id,name:e.name,description:ct(e.parentDepartments),role:null,isDepartment:!0,isOutsider:!1,avatar:"",disabled:!1}}):[]).concat(i.results.map(function(e){return{id:e.id,name:e.name,description:e.email||e.mobileAccount||e.mobile,role:null,isDepartment:!1,isOutsider:e.isOutsider,avatar:e.avatar,disabled:"disabled"===e.teamRole,email:e.email,teamId:e.teamId,status:e.status}})),a.results.forEach(function(t){0===i.results.filter(function(e){return e.id===t.id}).length&&r.push({id:t.id,name:t.name,description:t.email||t.mobileAccount||t.mobile,role:null,isDepartment:!1,isOutsider:!1,avatar:t.avatar,disabled:"disabled"===t.teamRole,email:t.email,teamId:t.teamId,status:t.status})}),r)]}var t,n,i,a,r})})}function bt(n,i,a,r){return Object(A.__awaiter)(this,void 0,void 0,function(){var t;return Object(A.__generator)(this,function(e){switch(e.label){case 0:return[4,at("/search?type=recent_contact&page=0&pageSize=100",{guid:n,keyword:i,teamId:a,fileId:r})];case 1:return t=e.sent(),[2,t.recent_contact.results.map(function(e){return{id:e.id,name:e.name,description:e.email||e.mobileAccount||e.mobile,role:null,isDepartment:!1,isOutsider:e.isOutsider,avatar:e.avatar,disabled:"disabled"===e.teamRole,email:e.email,teamId:e.teamId,status:e.status}})]}})})}var ft,gt=L.a.createContext({all:{collabs:[],admins:[]},file:null,refresh:function(){},zIndex:0,noAccessDisabled:!0,isDesktopVersion:!1,isEnterpriseVersion:!1,isEnterpriseAdmin:!1,parentFileGuid:void 0,myTeamId:void 0,isLoading:!0}),vt=(ft=L.a.Component,Object(A.__extends)(xt,ft),xt.prototype.componentDidMount=function(){var c;return Object(A.__awaiter)(this,void 0,void 0,function(){var t,n,i,a,r,o,l,s;return Object(A.__generator)(this,function(e){switch(e.label){case 0:return t=this.props,n=t.zIndex,i=t.isEnterpriseVersion,a=t.isDesktopVersion,r=t.isEnterpriseAdmin,o=t.parentFileGuid,l=t.me,s=t.teamId,(0,this.state.refresh)(),this.state.zIndex<n&&this.setState({zIndex:n}),this.setState({isDesktopVersion:a,isEnterpriseAdmin:r,isEnterpriseVersion:i,parentFileGuid:o,noAccessDisabled:!(null!==(c=null==l?void 0:l.accountMetadata)&&void 0!==c&&c.isEnterprisePremium),myTeamId:s}),i?[4,function(){return Object(A.__awaiter)(this,void 0,void 0,function(){var t;return Object(A.__generator)(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,nt("/alpha_features/collabpanel_no_access_allowed")];case 1:return t=e.sent(),[3,3];case 2:return e.sent(),t=!1,[3,3];case 3:return[2,t]}})})}()]:[3,2];case 1:e.sent()&&this.setState({noAccessDisabled:!1}),e.label=2;case 2:return[2]}})})},xt.prototype.render=function(){var e=this.props.children;return L.a.createElement(gt.Provider,{value:this.state},e)},xt);function xt(){var e=null!==ft&&ft.apply(this,arguments)||this;return e.state={all:{collabs:[],admins:[]},file:null,zIndex:0,refresh:function(){return Object(A.__awaiter)(e,void 0,void 0,function(){var t,n,i,a,r,o,l;return Object(A.__generator)(this,function(e){switch(e.label){case 0:t=this.props,n=t.guid,i=t.onError,e.label=1;case 1:return e.trys.push([1,3,,4]),[4,Promise.all([function(a){return Object(A.__awaiter)(this,void 0,void 0,function(){var t,n,i;return Object(A.__generator)(this,function(e){switch(e.label){case 0:return[4,nt("/v2/files/"+a+"/collaborators",{includeInherited:!1,includeAdmin:!0})];case 1:return t=e.sent(),n=t.admins,i=t.roles,[2,{collabs:dt(mt()(i,n,function(e,t){return e.id===t.id&&e.departmentId===t.departmentId}),!1),admins:dt(n,!0)}]}})})}(n),function(t,n){return void 0===n&&(n={collaboratorCount:!0,contentUrl:!0,updateViews:!0}),Object(A.__awaiter)(this,void 0,void 0,function(){return Object(A.__generator)(this,function(e){return[2,nt("/files/"+t,n)]})})}(n,{collaboratorCount:!0})])];case 2:return a=A.__read.apply(void 0,[e.sent(),2]),r=a[0],o=a[1],this.setState({all:r,file:o,isLoading:!1}),[3,4];case 3:return l=e.sent(),null!=i&&i(l),[3,4];case 4:return[2]}})})},noAccessDisabled:!1,isDesktopVersion:!1,isEnterpriseAdmin:!1,isEnterpriseVersion:!1,myTeamId:void 0,isLoading:!0},e}Object(_.minify)(!1);var _t,Et=(_t=L.a.Component,Object(A.__extends)(wt,_t),wt.prototype.render=function(){var e=this.props,t=e.children,n=e.style,i=void 0===n?{}:n,a=e.arrowLeftPosition,r=void 0===a?2:a,o=this._style;return L.a.createElement("div",{className:Object(_.css)(o.flag),style:i},t,L.a.createElement("div",{className:Object(_.css)(o.arrow),style:{left:r+"px"}}))},wt.contextType=gt,wt);function wt(){var e=null!==_t&&_t.apply(this,arguments)||this;return e._style=_.StyleSheet.create({flag:{display:"inline-block",padding:"6px 10px",color:"white",position:"relative",backgroundColor:"#41464C",boxShadow:"0 2px 4px 0 rgba(65,70,76,0.20)",borderRadius:"2px",fontSize:"12px",zIndex:e.context.zIndex,pointerEvents:"none"},arrow:{position:"absolute",top:"-8px",width:"0",height:"0",borderTop:"4px solid transparent",borderRight:"4px solid transparent",borderBottom:"4px solid #41464C",borderLeft:"4px solid transparent"}}),e}var kt,Ot=a.a.div(Object(A.__makeTemplateObject)(["\n  position: relative;\n  display: inline-block;\n  vertical-align: middle;\n  width: 82px;\n  height: 26px;\n"],["\n  position: relative;\n  display: inline-block;\n  vertical-align: middle;\n  width: 82px;\n  height: 26px;\n"])),yt=a.a.div(Object(A.__makeTemplateObject)(["\n  position: absolute;\n  top: 0;\n  left: 0;\n  border: 1px solid #e5e5e5;\n  width: 70px;\n  padding-left: 10px;\n  height: 24px;\n  line-height: 24px;\n  color: ",";\n  cursor: ",";\n  background-color: ",";\n  border-radius: 1px;\n  &::after {\n    content: ' ';\n    position: absolute;\n    top: 10px;\n    right: 13px;\n    width: 0;\n    height: 0;\n    border-width: 2px;\n    border-style: solid;\n    border-color: #a5a5a5 transparent transparent transparent;\n  }\n"],["\n  position: absolute;\n  top: 0;\n  left: 0;\n  border: 1px solid #e5e5e5;\n  width: 70px;\n  padding-left: 10px;\n  height: 24px;\n  line-height: 24px;\n  color: ",";\n  cursor: ",";\n  background-color: ",";\n  border-radius: 1px;\n  &::after {\n    content: ' ';\n    position: absolute;\n    top: 10px;\n    right: 13px;\n    width: 0;\n    height: 0;\n    border-width: 2px;\n    border-style: solid;\n    border-color: #a5a5a5 transparent transparent transparent;\n  }\n"]),function(e){return e.disabled?"#ccc":"#6da0e3"},function(e){return e.disabled?"not-allowed":"pointer"},function(e){return e.disabled?"#f7f7f7":"white"}),jt=a.a.div(Object(A.__makeTemplateObject)(["\n  width: 80px;\n  text-align: center;\n  color: ",";\n  cursor: ",";\n  background-color: ",";\n  border-radius: 1px;\n  border: 1px solid #e5e5e5;\n  height: 24px;\n  line-height: 24px;\n"],["\n  width: 80px;\n  text-align: center;\n  color: ",";\n  cursor: ",";\n  background-color: ",";\n  border-radius: 1px;\n  border: 1px solid #e5e5e5;\n  height: 24px;\n  line-height: 24px;\n"]),function(e){return e.disabled?"#ccc":"#cd4747"},function(e){return e.disabled?"not-allowed":"pointer"},function(e){return e.disabled?"#f7f7f7":"white"}),Ct=a.a.span(Object(A.__makeTemplateObject)(["\n  position: absolute;\n  width: 68px;\n  height: 24px;\n  line-height: 24px;\n  text-align: center;\n  left: 0;\n  top: 0;\n  text-overflow: ellipsis;\n  overflow: hidden;\n  white-space: nowrap;\n"],["\n  position: absolute;\n  width: 68px;\n  height: 24px;\n  line-height: 24px;\n  text-align: center;\n  left: 0;\n  top: 0;\n  text-overflow: ellipsis;\n  overflow: hidden;\n  white-space: nowrap;\n"])),St=a.a.div(Object(A.__makeTemplateObject)(["\n  position: absolute;\n  width: 210px;\n  background-color: white;\n  padding: 5px 0;\n  box-shadow: 0 4px 12px 0 rgba(0, 0, 0, 0.1);\n  border-radius: 2px;\n  z-index: ",";\n"],["\n  position: absolute;\n  width: 210px;\n  background-color: white;\n  padding: 5px 0;\n  box-shadow: 0 4px 12px 0 rgba(0, 0, 0, 0.1);\n  border-radius: 2px;\n  z-index: ",";\n"]),function(e){return e.zIndex}),Rt=(kt=B.Component,Object(A.__extends)(Mt,kt),Mt.prototype.componentDidMount=function(){var e=this.dropdownButtonRef,t=this.props.getInnerRef;null!=e&&e.current&&null!=t&&t(e)},Mt.prototype.componentWillUnmount=function(){document.removeEventListener("mousedown",this.handleDocumentMouseDown)},Mt.prototype.render=function(){var t=this,e=this.props,n=e.buttonText,i=e.buttonTextColor,a=void 0===i?"inherit":i,r=e.children,o=e.disabled,l=void 0!==o&&o,s=e.isRemove,c=void 0!==s&&s,d=e.renderHover,p=void 0===d?function(){}:d,m=e.childrenHeight,u=e.onRemove,h=this.state,b=h.collapsed,f=h.hover,g=document.documentElement.getBoundingClientRect(),v=g.width,x=g.height;return L.a.createElement(Ot,{"data-test":"dropdown_wrapper","data-disabled":l},c&&L.a.createElement(jt,{"data-test":"dropdown_button","data-disabled":l,disabled:l,onClick:u},"删除"),!c&&L.a.createElement(yt,{"data-test":"dropdown_button","data-disabled":l,disabled:l,onClick:this.handleButtonClick,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,innerRef:function(e){return t.dropdownButtonRef={current:e}}},L.a.createElement(Ct,{"data-text":"dropdown_button_text",style:{color:a}},n),f&&this.dropdownButtonRef&&p(this.dropdownButtonRef)),!c&&b&&this.dropdownButtonRef&&L.a.createElement(et,{innerRef:this.dropdownButtonRef},function(e){return e?e.top+e.height+5+m>x?L.a.createElement(St,{zIndex:t.context.zIndex,"data-text":"dropdown_list",style:{bottom:x-e.top+5+"px",right:v-e.right+"px"},onMouseDown:t.stopPropagation},r):L.a.createElement(St,{zIndex:t.context.zIndex,"data-test":"dropdown_list",style:{top:e.top+e.height+5+"px",right:v-e.right+"px"},onMouseDown:t.stopPropagation},r):null}))},Mt.contextType=gt,Mt);function Mt(){var n=null!==kt&&kt.apply(this,arguments)||this;return n.state={collapsed:!1,hover:!1},n.dropdownButtonRef=L.a.createRef(),n.handleButtonClick=function(e){var t=n.props.disabled;void 0!==t&&t||(n.setState({collapsed:!0}),setTimeout(function(){document.addEventListener("mousedown",n.handleDocumentMouseDown)},0))},n.handleDocumentMouseDown=function(e){n.state.collapsed&&(document.removeEventListener("mousedown",n.handleDocumentMouseDown),n.setState({collapsed:!1}))},n.handleMouseEnter=function(e){n.state.hover||n.setState({hover:!0})},n.handleMouseLeave=function(e){n.state.hover&&n.setState({hover:!1})},n.stopPropagation=function(e){e.nativeEvent.stopImmediatePropagation()},n}var Dt,Tt=n(945),It=n.n(Tt),At="icon_checker";Object(_.minify)(!1);var Bt=_.StyleSheet.create(((Dt={})[At]={display:"inline-block",verticalAlign:"middle"},Dt));function Lt(){return L.a.createElement("img",{src:It.a,height:"12",width:"16",className:Object(_.css)(Bt[At])})}var Nt=n(105),Pt=n.n(Nt);function Ht(){var t;try{t=new MouseEvent("mousedown")}catch(e){(t=document.createEvent("MouseEvent")).initMouseEvent("mousedown",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null)}document.dispatchEvent(t)}function zt(e){var t=Pt.a.find(e.type);return t?t.display:null}Object(_.minify)(!1);var Vt,Ft=_.StyleSheet.create({normal_item:{padding:"12px 20px",position:"relative",cursor:"pointer",":hover":{backgroundColor:"#E6E7E8"}},normal_item_disabled:{cursor:"not-allowed",":hover":{backgroundColor:"inherit"}},normal_item_title:{color:"#666666",fontSize:"12px",minHeight:"12px",lineHeight:"12px",width:"144px"},normal_item_title_disabled:{color:"#ccc"},normal_item_subtitle:{color:"#A5A5A5",fontSize:"12px",height:"12px",lineHeight:"12px",width:"170px"},normal_item_subtitle_disabled:{color:"#ccc"},normal_item_checker:{position:"absolute",top:"8px",right:"15px"}}),Wt=(Vt=L.a.Component,Object(A.__extends)(Xt,Vt),Xt.prototype.render=function(){var e=this.props,t=e.title,n=e.checked,i=e.disabled,a=void 0!==i&&i;return L.a.createElement("div",{className:Object(_.css)(Ft.normal_item,a&&Ft.normal_item_disabled),onClick:this.handleClick},L.a.createElement("div",{className:Object(_.css)(Ft.normal_item_title,a&&Ft.normal_item_title_disabled)},t),n&&L.a.createElement("div",{className:Object(_.css)(Ft.normal_item_checker)},L.a.createElement(Lt,null)))},Xt);function Xt(){var a=null!==Vt&&Vt.apply(this,arguments)||this;return a.handleClick=function(e){var t=a.props,n=t.onClick,i=t.disabled;void 0!==i&&i||(Ht(),n&&n())},a}Object(_.minify)(!1);var Ut,Yt=_.StyleSheet.create({upgrade_wrapper:{height:"14px",position:"relative"},upgrade:{display:"inline-block",marginLeft:"6px",textAlign:"center",verticalAlign:"middle",textDecoration:"none",fontSize:"12px",padding:"4px 8px",backgroundImage:"linear-gradient(-180deg,#6c9fe2 0%,#80b3f5 100%)",borderRadius:"2px",color:"white",transform:"scale(0.8)",transformOrigin:"0 0",position:"absolute",right:0,top:"-2px"}}),Gt=(Ut=L.a.Component,Object(A.__extends)(Kt,Ut),Kt.prototype.render=function(){var e=this.props.children;return L.a.createElement("div",{className:Object(_.css)(Yt.upgrade_wrapper)},e,L.a.createElement("a",{className:Object(_.css)(Yt.upgrade),href:"/pricing",target:"_blank"},M()("升级到企业版")))},Kt);function Kt(){return null!==Ut&&Ut.apply(this,arguments)||this}var qt,Jt=(qt=L.a.Component,Object(A.__extends)(Zt,qt),Zt.prototype.render=function(){var e,t=this.props.disabled,n=void 0!==t&&t,i=this.state,a=i.permission,r=i.hover,o=this.context,l=o.noAccessDisabled,s=o.isEnterpriseVersion;return L.a.createElement(Rt,{buttonText:"inherited"===(e=a)?M()("继承权限"):"none"===e?M()("没有权限"):"reader"===e?M()("只能阅读"):"commentator"===e?M()("只能评论"):"editor"===e?M()("可以编辑"):M()("继承权限"),disabled:n,childrenHeight:275,renderHover:this.handleRenderHover},L.a.createElement(Wt,{onClick:this.handleClick("inherited"),title:M()("继承权限"),checked:"inherited"===a,disabled:!1}),L.a.createElement(Wt,{onClick:this.handleClick("reader"),title:s?M()("只能阅读"):L.a.createElement(Gt,null,M()("只能阅读")),checked:"reader"===a,disabled:!s}),L.a.createElement(Wt,{onClick:this.handleClick("commentator"),title:s?M()("只能评论"):L.a.createElement(Gt,null,M()("只能评论")),checked:"commentator"===a,disabled:!s}),L.a.createElement(Wt,{onClick:this.handleClick("editor"),title:M()("可以编辑"),checked:"editor"===a,disabled:!1}),L.a.createElement("div",{onMouseEnter:this.handleNormalEnter,onMouseLeave:this.handleNormalLeave,ref:this.noneAccessRef},L.a.createElement(Wt,{onClick:this.handleClick("none"),title:M()("没有权限"),checked:"none"===a,disabled:l}),r&&this.noneAccessRef.current&&l&&L.a.createElement(et,{innerRef:this.noneAccessRef},function(e){return e&&L.a.createElement(Et,{style:{position:"absolute",left:e.left+19+"px",top:e.top+e.height+"px"},arrowLeftPosition:22},M()("企业高级版功能"))})))},Zt.contextType=gt,Zt);function Zt(){var e,i=qt.apply(this,Object(A.__spread)(arguments))||this;return i.state={permission:null!==(e=i.props.permission)&&void 0!==e?e:"inherited",hover:!1},i.noneAccessRef=L.a.createRef(),i.handleClick=function(t){return function(){var e=i.props.onChange;i.setState({permission:t}),null!=e&&e(t)}},i.handleNormalEnter=function(){i.state.hover||i.setState({hover:!0})},i.handleNormalLeave=function(){i.state.hover&&i.setState({hover:!1})},i.handleRenderHover=function(e){var t=i.props.isDesktopVersion;if(!(void 0!==t&&t))return null;var n=document.documentElement.getBoundingClientRect().width;return L.a.createElement(et,{innerRef:e},function(e){return e?L.a.createElement(Et,{style:{position:"absolute",right:n-e.right+"px",top:e.top+e.height+10+"px"},arrowLeftPosition:216},M()("桌面文件暂时不支持修改上级目录协作者权限")):null})},i}var $t,Qt=n(27),en=n(943),tn=n.n(en),nn="icon_warning";Object(_.minify)(!1);var an=_.StyleSheet.create((($t={})[nn]={display:"inline-block",verticalAlign:"middle"},$t));function rn(e){var t=e.style,n=void 0===t?{}:t;return L.a.createElement("img",{src:tn.a,height:"12",width:"12",className:Object(_.css)(an[nn]),style:n})}function on(e){var t=e.style,n=e.dataTest;return L.a.createElement(dn,{color:"#4583d4",style:t,"data-test":n},M()("外部"))}function ln(e){var t=e.style,n=e.dataTest;return L.a.createElement(dn,{color:"rgba(65, 70, 75, 0.4)",style:t,"data-test":n},M()("禁用"))}function sn(e){var t=e.children,n=e.isOutsider,i=void 0!==n&&n,a=e.isDisabled,r=void 0!==a&&a,o=e.isSelf,l=void 0!==o&&o,s=e.noclip,c=void 0!==s&&s,d=e.styles,p=e.isInviteOutdated,m=void 0!==p&&p,u=N?{marginLeft:"2px"}:{marginLeft:"5px"};return L.a.createElement(pn,{isMobile:N,style:d,"data-test":"row_name"},L.a.createElement(mn,{noclip:c,disabled:r||m,isShort:d&&"auto"!==d.width,title:(l?M()("(我) "):"")+t,"data-test":"row_name_text"},l&&M()("(我) "),t),i&&L.a.createElement(on,{style:u,dataTest:"row_name_outsider"}),r&&L.a.createElement(ln,{style:u,"data-test":"row_name_disabled"}),m&&L.a.createElement(Qt.a,{title:L.a.createElement(hn,null,M()("该邮箱号已被关联至新账号下，请删除后重新邀请该邮箱/手机号加入企业")),trigger:"hover",placement:"right",theme:"white"},L.a.createElement(un,null,L.a.createElement(rn,{style:u,"data-test":"row_name_outdated"}))))}var cn,dn=a.a.span(Object(A.__makeTemplateObject)(["\n  display: inline-block;\n  border: 1px solid ",";\n  color: ",";\n  width: 50px;\n  margin-right: -25px;\n  height: 28px;\n  line-height: 28px;\n  text-align: center;\n  transform: scale(0.5) translate(-50%, 0);\n  font-size: 16px;\n  vertical-align: middle;\n  overflow: hidden;\n"],["\n  display: inline-block;\n  border: 1px solid ",";\n  color: ",";\n  width: 50px;\n  margin-right: -25px;\n  height: 28px;\n  line-height: 28px;\n  text-align: center;\n  transform: scale(0.5) translate(-50%, 0);\n  font-size: 16px;\n  vertical-align: middle;\n  overflow: hidden;\n"]),function(e){return e.color},function(e){return e.color}),pn=a.a.div(Object(A.__makeTemplateObject)(["\n  display: ",";\n  align-items: ",";\n  padding-right: ",";\n  width: 160px;\n  vertical-align: middle;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n  overflow: hidden;\n  margin-left: 15px;\n"],["\n  display: ",";\n  align-items: ",";\n  padding-right: ",";\n  width: 160px;\n  vertical-align: middle;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n  overflow: hidden;\n  margin-left: 15px;\n"]),function(e){return e.isMobile?"flex":"inline-block"},function(e){return e.isMobile?"center":"unset"},function(e){return e.isMobile?"2px":"0"}),mn=a.a.span(Object(A.__makeTemplateObject)(["\n  display: inline-block;\n  overflow: ",";\n  max-width: 120px;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n  vertical-align: middle;\n  color: ",";\n\n  &:only-child {\n    max-width: ",";\n  }\n"],["\n  display: inline-block;\n  overflow: ",";\n  max-width: 120px;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n  vertical-align: middle;\n  color: ",";\n\n  &:only-child {\n    max-width: ",";\n  }\n"]),function(e){return e.noclip?"visible":"hidden"},function(e){return e.disabled?"#ccc":"inherit"},function(e){return e.isShort?"140px":"150px"}),un=a.a.span(Object(A.__makeTemplateObject)(["\n  cursor: pointer;\n"],["\n  cursor: pointer;\n"])),hn=a.a.div(Object(A.__makeTemplateObject)(["\n  width: 210px;\n  line-height: 1.67;\n  margin: 10px 15px;\n  text-align: left;\n  color: #666;\n"],["\n  width: 210px;\n  line-height: 1.67;\n  margin: 10px 15px;\n  text-align: left;\n  color: #666;\n"])),bn=a.a.div(Object(A.__makeTemplateObject)(["\n  padding: ",";\n  display: ",";\n  align-items: ",";\n  position: relative;\n\n  &:hover {\n    background-color: #f7f7f7;\n  }\n"],["\n  padding: ",";\n  display: ",";\n  align-items: ",";\n  position: relative;\n\n  &:hover {\n    background-color: #f7f7f7;\n  }\n"]),function(e){return e.isMobile?"7px 10px":"7px 0 7px 44px"},function(e){return e.isMobile?"flex":"block"},function(e){return e.isMobile?"center":"unset"}),fn=a.a.div(Object(A.__makeTemplateObject)(["\n  display: ",";\n  width: 325px;\n"],["\n  display: ",";\n  width: 325px;\n"]),function(e){return e.isMobile?"flex":"inline-block"}),gn=a.a.div(Object(A.__makeTemplateObject)(["\n  margin-left: 10px;\n  display: inline-block;\n  vertical-align: middle;\n"],["\n  margin-left: 10px;\n  display: inline-block;\n  vertical-align: middle;\n"])),vn=a.a.span(Object(A.__makeTemplateObject)(["\n  color: #6da0e3;\n  margin-left: 10px;\n  cursor: pointer;\n  vertical-align: middle;\n"],["\n  color: #6da0e3;\n  margin-left: 10px;\n  cursor: pointer;\n  vertical-align: middle;\n"])),xn=(cn=L.a.Component,Object(A.__extends)(_n,cn),_n.prototype.render=function(){var e=this.props,t=e.permission,n=void 0===t?"inherited":t,i=e.disabled,a=void 0!==i&&i,r=e.superiorPermissionsShown,o=e.isDesktopVersion,l=void 0!==o&&o,s=r?M()("收起"):M()("查看");return L.a.createElement(bn,{isMobile:N,"data-test":"row_parent"},L.a.createElement(Ze,null),L.a.createElement(fn,{isMobile:N},L.a.createElement(sn,{noclip:!0,styles:{overflow:"initial",width:"auto"}},M()("上级目录协作者")),L.a.createElement(vn,{"data-test":"row_parent_button",onClick:this.props.onClick},s)),L.a.createElement(gn,{"data-test":"row_parent_dropdown_wrapper"},L.a.createElement(Jt,{permission:l?"inherited":n,disabled:!!l||a,onChange:this.handlePermissionChange,isDesktopVersion:l,"data-test":"row_parent_dropdown","data-disabled":a})))},_n);function _n(){var n=null!==cn&&cn.apply(this,arguments)||this;return n.handlePermissionChange=function(e){var t=n.props.onChange;t&&t(e)},n}function En(e){var t=e.children;return L.a.createElement(Qt.a,{title:L.a.createElement(yn,null,t),trigger:"hover",placement:"top",mouseEnterDelay:.6},L.a.createElement(On,{"data-test":"description"},t))}var wn,kn=n(202),On=a.a.div(Object(A.__makeTemplateObject)(["\n  display: inline-block;\n  width: 150px;\n  vertical-align: middle;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n  overflow: hidden;\n  color: #808080;\n"],["\n  display: inline-block;\n  width: 150px;\n  vertical-align: middle;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n  overflow: hidden;\n  color: #808080;\n"])),yn=a.a.div(Object(A.__makeTemplateObject)(["\n  max-width: 180px;\n  line-height: 1.7;\n  text-align: left;\n  padding: 0 2px;\n"],["\n  max-width: 180px;\n  line-height: 1.7;\n  text-align: left;\n  padding: 0 2px;\n"])),jn=n(944),Cn=n.n(jn),Sn="icon_department";Object(_.minify)(!1);var Rn=_.StyleSheet.create(((wn={})[Sn]={display:"inline-block",verticalAlign:"middle"},wn));function Mn(e){var t=e.style,n=void 0===t?{}:t;return L.a.createElement("img",{src:Cn.a,height:"28",width:"28",className:Object(_.css)(Rn[Sn]),style:n})}var Dn,Tn=a.a.div(Object(A.__makeTemplateObject)(["\n  display: inline-block;\n  width: 28px;\n  height: 28px;\n  border-radius: 14px;\n  overflow: hidden;\n  min-width: ",";\n  vertical-align: middle;\n"],["\n  display: inline-block;\n  width: 28px;\n  height: 28px;\n  border-radius: 14px;\n  overflow: hidden;\n  min-width: ",";\n  vertical-align: middle;\n"]),function(e){return e.isMobile?"28px":"initial"}),In=(Dn=L.a.Component,Object(A.__extends)(An,Dn),An.prototype.render=function(){return L.a.createElement(Tn,{isMobile:N,"data-test":"avatar_department"},L.a.createElement(Mn,null))},An);function An(){return null!==Dn&&Dn.apply(this,arguments)||this}Object(_.minify)(!1);function Bn(e){function t(){return L.a.createElement("main",{className:Object(_.css)(Nn.details_tooltip)},L.a.createElement("section",{className:Object(_.css)(Nn.details_tooltip_part_profile)},L.a.createElement("img",{className:Object(_.css)(Nn.details_tooltip_avatar),src:a,alt:r}),L.a.createElement("span",{className:Object(_.css)(Nn.details_tooltip_name)},r)),L.a.createElement("hr",{className:Object(_.css)(Nn.details_tooltip_divider)}),L.a.createElement("section",{className:Object(_.css)(Nn.details_tooltip_part)},L.a.createElement("label",{className:Object(_.css)(Nn.details_tooltip_part_label)},M()("ID")),L.a.createElement("span",null,i)),L.a.createElement("section",{className:Object(_.css)(Nn.details_tooltip_part)},L.a.createElement("label",{className:Object(_.css)(Nn.details_tooltip_part_label)},M()("邮箱")),L.a.createElement("span",null,o||M()("未绑定邮箱"))),L.a.createElement("section",{className:Object(_.css)(Nn.details_tooltip_part,Nn.details_tooltip_part_deps)},L.a.createElement("label",{className:Object(_.css)(Nn.details_tooltip_part_label)},M()("部门")),c?L.a.createElement(kn.a,null):h&&l!==h?l?M()("无权限查看其他企业员工信息"):M()("无权限查看"):m.length?L.a.createElement("ul",{className:Object(_.css)(Nn.details_tooltip_part_deps_value)},m.map(function(e,t){return L.a.createElement("li",{className:Object(_.css)(Nn.details_tooltip_part_deps_li),key:t},e.departments.map(function(e){return e.name}).join(" - "))})):M()("暂无")))}var n=e.children,i=e.userId,a=e.avatar,r=e.name,o=e.email,l=e.teamId,s=Object(A.__read)(Object(B.useState)(!0),2),c=s[0],d=s[1],p=Object(A.__read)(Object(B.useState)([]),2),m=p[0],u=p[1],h=Object(B.useContext)(gt).myTeamId;return L.a.createElement(Qt.a,{placement:"rightTop",trigger:["hover"],theme:"white",title:function(){return t()||null},onVisibleChange:function(e){e&&(l&&h&&l===h?nt("/departments/get_user_path",{user_id:i}).then(function(e){u(e.paths),d(!1)},function(){d(!1)}):d(!1))}},n)}var Ln,Nn=_.StyleSheet.create({details_tooltip:{color:"#333",textAlign:"left",maxHeight:"200px",fontSize:"12px",margin:"8px",minWidth:"140px"},details_tooltip_part_profile:{alignItems:"center",display:"flex"},details_tooltip_avatar:{width:"28px",height:"28px",borderRadius:"50%",verticalAlign:"middle",marginRight:"15px"},details_tooltip_divider:{border:"none",borderBottom:"1px solid #e5e5e5",width:"104%",display:"block",margin:"12px 0 12px -2%"},details_tooltip_name:{fontSize:"16px"},details_tooltip_part:{display:"flex",marginBottom:"5px",lineHeight:"1.5",":last-child":{marginBottom:"0"}},details_tooltip_part_label:{width:"40px",color:"#999"},details_tooltip_part_deps:{paddingRight:"20px"},details_tooltip_part_deps_value:{margin:"0 0 -4px",padding:0,listStyle:"none"},details_tooltip_part_deps_li:{marginBottom:"4px"}}),Pn=a.a.div(Object(A.__makeTemplateObject)(["\n  display: inline-block;\n  width: 28px;\n  height: 28px;\n  border-radius: 14px;\n  overflow: hidden;\n  min-width: ",";\n  vertical-align: middle;\n"],["\n  display: inline-block;\n  width: 28px;\n  height: 28px;\n  border-radius: 14px;\n  overflow: hidden;\n  min-width: ",";\n  vertical-align: middle;\n"]),function(e){return e.isMobile?"28px":"initial"}),Hn=(Ln=L.a.Component,Object(A.__extends)(zn,Ln),zn.prototype.render=function(){var e=this.props,t=e.src,n=e.userId,i=e.name,a=e.email,r=e.teamId;return L.a.createElement(Bn,{avatar:t,userId:n,name:i,email:a,teamId:r},L.a.createElement(Pn,{isMobile:N,"data-test":"avatar_user"},L.a.createElement("img",{src:t,width:"28",height:"28"})))},zn);function zn(){return null!==Ln&&Ln.apply(this,arguments)||this}var Vn,Fn=a.a.div(Object(A.__makeTemplateObject)(["\n  padding: ",";\n  display: ",";\n  align-items: ",";\n  position: relative;\n"],["\n  padding: ",";\n  display: ",";\n  align-items: ",";\n  position: relative;\n"]),function(e){return e.isMobile?"7px 10px":"7px 0 7px 30px"},function(e){return e.isMobile?"flex":"block"},function(e){return e.isMobile?"center":"initial"}),Wn=a.a.div(Object(A.__makeTemplateObject)(["\n  margin-left: 10px;\n  display: inline-block;\n  color: #929292;\n  width: ",";\n  text-align: ",";\n"],["\n  margin-left: 10px;\n  display: inline-block;\n  color: #929292;\n  width: ",";\n  text-align: ",";\n"]),function(e){return e.isMobile?"90px":"60px"},function(e){return e.isMobile?"left":"center"}),Xn=(Vn=L.a.Component,Object(A.__extends)(Un,Vn),Un.prototype.render=function(){var e=this.props,t=e.isOutsider,n=void 0!==t&&t,i=e.permission,a=void 0===i?"edit":i,r=e.name,o=void 0===r?"":r,l=e.id,s=e.email,c=e.teamId,d=e.description,p=void 0===d?"":d,m=e.isDepartment,u=void 0!==m&&m,h=e.avatar,b=e.isSelf,f=void 0!==b&&b,g=e.isDisabled,v=void 0!==g&&g,x=-1===e.status&&!p;return L.a.createElement(Fn,{isMobile:N},u?L.a.createElement(In,null):L.a.createElement(Hn,{src:h||"",name:o,email:s,userId:l,teamId:c}),L.a.createElement(sn,{isSelf:f,isOutsider:n,isDisabled:v,styles:{width:"140px"},isInviteOutdated:x},o),L.a.createElement(En,null,p),L.a.createElement(Wn,{"data-test":"row_superior_permission",isMobile:N},y(a)))},Un);function Un(){return null!==Vn&&Vn.apply(this,arguments)||this}function Yn(e){var t=e.isLoading,n=e.list,i=e.parentRole,a=e.me;return L.a.createElement(Gn,{isMobile:N},t&&L.a.createElement(Kn,null,L.a.createElement(kn.a,null)),!t&&(n.length?L.a.createElement(qn,{isMobile:N},L.a.createElement(Xe,{maxHeight:"210px",width:"100%",wrapperHeight:N?"100%":""},n.map(function(e){return L.a.createElement(Xn,{key:e.id,isOutsider:e.isOutsider,name:e.name,id:e.id,email:e.email,teamId:e.teamId,description:e.description,avatar:e.avatar,isDepartment:e.isDepartment,disabled:e.disabled,status:e.status,isDisabled:e.disabled,isSelf:e.id===a.id&&!e.isDepartment,permission:"inherited"===i?e.role:{none:"none",editor:"edit",reader:"read",commentator:"comment"}[i]})}))):L.a.createElement(Jn,null,M()("没有上级目录协作者"))))}var Gn=a.a.div(Object(A.__makeTemplateObject)(["\n  max-height: 210px;\n  margin: ",";\n  padding: 5px 0;\n  background-color: ",";\n"],["\n  max-height: 210px;\n  margin: ",";\n  padding: 5px 0;\n  background-color: ",";\n"]),function(e){return e.isMobile?"0":"0 40px"},function(e){return e.isMobile?"#f7f7f7":"inherit"}),Kn=a.a.div(Object(A.__makeTemplateObject)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  height: 35px;\n  padding-top: 5px;\n  margin-bottom: -5px;\n"],["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  height: 35px;\n  padding-top: 5px;\n  margin-bottom: -5px;\n"])),qn=a.a.div(Object(A.__makeTemplateObject)(["\n  position: relative;\n\n  &::before {\n    content: '';\n    height: 90%;\n    width: ",";\n    position: absolute;\n    top: 5%;\n    left: 16px;\n    background-color: #ddd;\n  }\n"],["\n  position: relative;\n\n  &::before {\n    content: '';\n    height: 90%;\n    width: ",";\n    position: absolute;\n    top: 5%;\n    left: 16px;\n    background-color: #ddd;\n  }\n"]),function(e){return e.isMobile?"0":"1px"}),Jn=a.a.span(Object(A.__makeTemplateObject)(["\n  color: #a5a5a5;\n  display: block;\n  padding: 7px 0 7px 30px;\n"],["\n  color: #a5a5a5;\n  display: block;\n  padding: 7px 0 7px 30px;\n"]));function Zn(){var e=document.getElementById("toast-container");if(e)return e;var t=document.createElement("div");return t.setAttribute("id","toast-container"),t.className=Object(_.css)(_.StyleSheet.create({toast_container:{position:"fixed",zIndex:9999,left:0,right:0,top:"30px",textAlign:"center",fontSize:"12px",pointerEvents:"none"}}).toast_container),document.body.appendChild(t),t}function $n(e){var t=document.createElement("div");return t.className=Object(_.css)(_.StyleSheet.create({toast_subcontainer:{display:"block",marginBottom:"10px",pointerEvents:"none"}}).toast_subcontainer),e.appendChild(t),t}function Qn(e,t){e.removeChild(t)}Object(_.minify)(!1);var ei,ti=_.StyleSheet.create({toast:{display:"inline-block",padding:"0 25px",height:"35px",lineHeight:"35px",textAlign:"center",color:"rgb(102, 102, 102)",boxShadow:"rgba(0, 0, 0, 0.15) 0px 2px 6px 0px",border:"1px solid rgb(229, 229, 229)",backgroundColor:"white",position:"relative"},toast_warning:{paddingLeft:"42px"}}),ni=(ei=L.a.Component,Object(A.__extends)(ii,ei),ii.prototype.render=function(){var e=this.props,t=e.message,n=e.type;return L.a.createElement(L.a.Fragment,null,L.a.createElement("div",{className:Object(_.css)(ti.toast,"warning"===n&&ti.toast_warning)},"warning"===n&&L.a.createElement(rn,{style:{position:"absolute",top:"12px",left:"22px"}}),t),L.a.createElement("br",null))},ii);function ii(){return null!==ei&&ei.apply(this,arguments)||this}var ai={success:function(e){var t=Zn(),n=$n(t);Object(Qe.render)(L.a.createElement(ni,{message:e,type:"success"}),n),setTimeout(function(){Object(Qe.unmountComponentAtNode)(n),Qn(t,n)},3e3)},warning:function(e){var t=Zn(),n=$n(t);Object(Qe.render)(L.a.createElement(ni,{message:e,type:"warning"}),n),setTimeout(function(){Object(Qe.unmountComponentAtNode)(n),Qn(t,n)},3e3)}};Object(_.minify)(!1);var ri,oi=(ri=L.a.Component,Object(A.__extends)(li,ri),li.prototype.render=function(){var e=this.props,t=e.title,n=e.description,i=e.style,a=e.okText,r=void 0===a?M()("确定"):a,o=e.cancelText,l=void 0===o?M()("取消"):o,s=e.onConfirm,c=e.onClose,d=e.arrowLeftPosition,p=void 0===d?20:d,m=e.arrowDirection,u=void 0===m?"up":m,h=this._style;return L.a.createElement("div",{className:Object(_.css)(h.confirm_dialog),onMouseDown:this.stopPropagation,style:i},L.a.createElement("div",{className:Object(_.css)(h.confirm_dialog_title)},t),L.a.createElement("div",{className:Object(_.css)(h.confirm_dialog_description)},n),L.a.createElement("div",{className:Object(_.css)(h.confirm_dialog_buttons)},L.a.createElement("div",{className:Object(_.css)(h.confirm_dialog_buttons_ok),onClick:s},r),L.a.createElement("div",{className:Object(_.css)(h.confirm_dialog_buttons_cancel),onClick:c},l)),"up"===u?L.a.createElement("div",{className:Object(_.css)(h.arrow_up),style:{left:p}}):L.a.createElement("div",{className:Object(_.css)(h.arrow_down),style:{left:p}}))},li.contextType=gt,li);function li(){var e=null!==ri&&ri.apply(this,arguments)||this;return e._style=_.StyleSheet.create({confirm_dialog:{display:"inline-block",width:"230px",boxSizing:"border-box",padding:"0 0 20px",position:"relative",backgroundColor:"white",backgroundImage:"linear-gradient(-180deg, #FFFFFF 0%, #FAFAFA 100%)",boxShadow:"0 4px 12px 1px rgba(0,0,0,0.20), inset 0 0 20px 0 rgba(255,255,255,0.36)",borderRadius:"2px",zIndex:e.context.zIndex},confirm_dialog_title:{fontSize:"14px",fontWeight:"bold",lineHeight:"20px",padding:"15px 20px 10px",borderBottom:"1px solid rgb(232, 232, 232)",position:"relative",zIndex:1,backgroundColor:"white"},confirm_dialog_description:{color:"#666",lineHeight:"21px",fontSize:"12px",padding:"0 20px",margin:"15px 0"},confirm_dialog_buttons:{textAlign:"center"},confirm_dialog_buttons_ok:{display:"inline-block",width:"85px",height:"30px",lineHeight:"30px",textAlign:"center",color:"white",marginRight:"5px",cursor:"pointer",backgroundImage:"linear-gradient(#e95555, #cd4747)",border:"1px solid #cd4747",borderRadius:"2px",fontSize:"12px",fontWeight:"bold",":hover":{backgroundImage:"none",backgroundColor:"#cd4747"}},confirm_dialog_buttons_cancel:{display:"inline-block",width:"85px",height:"30px",lineHeight:"30px",textAlign:"center",color:"#676B6F",marginRight:"5px",cursor:"pointer",backgroundImage:"linear-gradient(-180deg, #FFFFFF 0%, #FBFBFB 100%)",border:"1px solid #CCCCCC",borderRadius:"2px",fontSize:"12px",marginLeft:"10px",":hover":{backgroundImage:"none",borderColor:"#a5a5a5",backgroundColor:"white"}},arrow_up:{position:"absolute",top:"-3px",width:"6px",height:"6px",boxShadow:"rgba(0, 0, 0, 0.2) 0px 4px 12px 1px, rgba(255, 255, 255, 0.36) 0px 0px 20px 0px inset",transform:"rotate(45deg)",backgroundColor:"white"},arrow_down:{position:"absolute",top:"191px",borderTop:"4px solid white",boxShadow:"none",left:"186px",borderLeft:"4px solid transparent",borderRight:"4px solid transparent",borderBottom:"4px solid transparent",width:"0px",height:"0px"}}),e.stopPropagation=function(e){e.nativeEvent.stopImmediatePropagation()},e}function si(e){var t=e.name,n=e.departmentName,i=e.fileType,a=e.onConfirm,r=e.onClose,o=e.arrowDirection,l=void 0===o?"up":o;return L.a.createElement(oi,{title:M()("确认添加"+t),description:M()(ci=ci||Object(A.__makeTemplateObject)(["添加后，","内所有成员均可访问该","，并会收到消息提醒"],["添加后，","内所有成员均可访问该","，并会收到消息提醒"]),n,i),okText:M()("确认添加"),style:{width:"230px"},arrowLeftPosition:186,arrowDirection:l,onConfirm:a,onClose:r})}var ci;Object(_.minify)(!1);var di=_.StyleSheet.create({divider_wrapper:{height:"1px",padding:"5px 15px"},divider:{backgroundColor:"#D8D8D8",height:"1px"}});function pi(){return L.a.createElement("div",{className:Object(_.css)(di.divider_wrapper)},L.a.createElement("div",{className:Object(_.css)(di.divider)}))}Object(_.minify)(!1);var mi,ui=_.StyleSheet.create({remove_item:{textAlign:"left",position:"relative",padding:"12px 20px",fontSize:"12px",":hover":{backgroundColor:"#E6E7E8"}},remove_item_button:{color:"#CD4747",cursor:"pointer"},remove_item_button_disabled:{color:"#ccc",cursor:"not-allowed"}}),hi=(mi=L.a.Component,Object(A.__extends)(bi,mi),bi.prototype.render=function(){var e=this.props,t=e.disabled,n=void 0!==t&&t,i=e.isSelf,a=void 0!==i&&i;return L.a.createElement("div",{className:Object(_.css)(ui.remove_item)},L.a.createElement("div",{className:Object(_.css)(ui.remove_item_button,n&&ui.remove_item_button_disabled),onClick:this.handleRemoveButtonClick},a?M()("移除当前权限"):M()("移除已选权限")))},bi);function bi(){var r=null!==mi&&mi.apply(this,arguments)||this;return r.handleRemoveButtonClick=function(e){var t=r.props,n=t.disabled,i=void 0!==n&&n,a=t.onClick;i||a&&a()},r}var fi,gi=(fi=L.a.Component,Object(A.__extends)(vi,fi),vi.getDerivedStateFromProps=function(e,t){return t.permission!==e.permission?{permission:e.permission}:null},vi.prototype.render=function(){var e,t=this,n=this.props,i=n.isSelf,a=void 0!==i&&i,r=n.isInviteOutdated,o=n.disabled,l=n.name,s=void 0===l?"":l,c=n.isEnterprise,d=this.state,p=d.permission,m=d.hover,u=d.showConfirmDialog,h=this.context,b=h.noAccessDisabled,f=h.isDesktopVersion,g="admin"===p||!!o&&!a,v=!a||!p,x="inherit";g?x="#ccc":p||(x="#666");var _=null!==(e=zt(h.file))&&void 0!==e?e:"",E=c?M()("企业"):s,w=document.documentElement.getBoundingClientRect(),k=w.width,O=w.height;return L.a.createElement(L.a.Fragment,null,L.a.createElement(Rt,{buttonText:y(p),buttonTextColor:x,disabled:g,renderHover:this.onHover,getInnerRef:this.onRef,childrenHeight:270,isRemove:r,onRemove:this.handleRemoveItemClick},this.renderOptions(),!f&&(v||"none"===p)&&L.a.createElement("div",{onMouseEnter:this.handleNormalEnter,onMouseLeave:this.handleNormalLeave,ref:this.noneAccessRef},L.a.createElement(Wt,{onClick:this.handleNormalClick(p,"none"),title:M()("禁止访问"),checked:"none"===p,disabled:b}),m&&this.noneAccessRef.current&&b&&L.a.createElement(et,{innerRef:this.noneAccessRef},function(e){return e&&L.a.createElement(Et,{style:{position:"absolute",left:e.left+19+"px",top:e.top+e.height+"px"},arrowLeftPosition:22},M()("企业高级版功能"))})),p&&L.a.createElement(L.a.Fragment,null,L.a.createElement(pi,null),L.a.createElement(hi,{isSelf:a,onClick:this.handleRemoveItemClick}))),u&&this.wrapperRef&&L.a.createElement(et,{innerRef:this.wrapperRef},function(e){return e?e.top+e.height+10+191>O?L.a.createElement("div",{id:"confirm-dialog-add-department",style:{position:"absolute",right:k-e.right+"px",bottom:O-e.top+10+"px"}},L.a.createElement(si,{name:s,departmentName:E,fileType:_,onConfirm:t.handleAddDepartment,onClose:t.handleHideConfirmDialog,arrowDirection:"down"})):L.a.createElement("div",{id:"confirm-dialog-add-department",style:{position:"absolute",right:k-e.right+"px",top:e.top+e.height+10+"px"}},L.a.createElement(si,{name:s,departmentName:E,fileType:_,onConfirm:t.handleAddDepartment,onClose:t.handleHideConfirmDialog})):null}))},vi.contextType=gt,vi);function vi(e){var c=fi.call(this,e)||this;c.noneAccessRef=L.a.createRef(),c.wrapperRef=null,c.targetPermission=null,c.handleNormalClick=function(o,l){return function(){var e=c.props,t=e.onChange,n=e.isDepartment,i=c.context,a=i.file,r=i.isEnterpriseVersion;a&&(n&&a.isSpace&&!a.teamId&&r?ai.warning(M()("此空间归属个人所有，添加部门协作前请先移交给企业。")):(c.setState({permission:l}),!o&&n?(c.targetPermission=l,c.handleShowConfirmDialog()):null!=t&&t(l,o)))}},c.handleRemoveItemClick=function(){var e=c.props.onRemove;null!=e&&e(),Ht()},c.handleNormalEnter=function(){c.state.hover||c.setState({hover:!0})},c.handleNormalLeave=function(){c.state.hover&&c.setState({hover:!1})},c.onHover=function(e){var t=c.props,n=t.disabled,i=void 0!==n&&n,a=t.isSelf,r=t.isOutsider,o=i&&!a,l=Object(Z.isSelfHosted)()&&r?M()("私有化环境不能添加外部协作者"):M()("无权更改协作者的权限"),s=document.documentElement.getBoundingClientRect().width;return L.a.createElement(et,{innerRef:e},function(e){return e&&o?L.a.createElement(Et,{style:{position:"absolute",right:s-e.right+"px",top:e.top+e.height+10+"px"},arrowLeftPosition:94},l):null})},c.onRef=function(e){c.wrapperRef=e},c.handleShowConfirmDialog=function(){c.state.showConfirmDialog||c.setState({showConfirmDialog:!0})},c.handleHideConfirmDialog=function(){c.state.showConfirmDialog&&c.setState({showConfirmDialog:!1})},c.handleAddDepartment=function(){var e=c.props.onChange;null!=e&&e(c.targetPermission,null),c.handleHideConfirmDialog()},c.renderOptions=function(){var e=c.props.isSelf,t=void 0!==e&&e,n=c.state.permission,i=c.context.isEnterpriseVersion,a=!t||!n;return L.a.createElement(L.a.Fragment,null,(a||"read"===n)&&L.a.createElement(Wt,{onClick:c.handleNormalClick(n,"read"),title:i?M()("只能阅读"):L.a.createElement(Gt,null,M()("只能阅读")),checked:"read"===n,disabled:!i}),(a||"comment"===n)&&L.a.createElement(Wt,{onClick:c.handleNormalClick(n,"comment"),title:i?M()("只能评论"):L.a.createElement(Gt,null,M()("只能评论")),checked:"comment"===n,disabled:!i}),(a||"edit"===n)&&L.a.createElement(Wt,{onClick:c.handleNormalClick(n,"edit"),title:M()("可以编辑"),checked:"edit"===n,disabled:!1}))};var t=e.permission;return c.state={permission:null!=t?t:null,hover:!1,showConfirmDialog:!1},c}function xi(n){var e=Object(A.__read)(Object(B.useState)(!1),2),t=e[0],i=e[1],a=n.isOutsider,r=void 0!==a&&a,o=n.permission,l=void 0===o?"edit":o,s=n.name,c=void 0===s?"":s,d=n.id,p=n.email,m=n.teamId,u=n.description,h=void 0===u?"":u,b=n.isDepartment,f=void 0!==b&&b,g=n.avatar,v=n.disabled,x=void 0!==v&&v,_=n.isSelf,E=void 0!==_&&_,w=n.isDisabled,k=void 0!==w&&w,O=n.withRemoveButton,y=void 0!==O&&O,j=n.status,C=n.onRecentRemove,S=-1===j&&!h;return L.a.createElement(bn,{isMobile:N,onMouseEnter:function(){i(!0)},onMouseLeave:function(){i(!1)},"data-test":"row_collab"},y&&t&&L.a.createElement(F,{onClick:C,style:{position:"absolute",left:"20px",top:"15px"}}),f?L.a.createElement(In,null):L.a.createElement(Hn,{src:null!=g?g:"",name:c,userId:d,email:p,teamId:m}),L.a.createElement(sn,{isSelf:E,isOutsider:r,isDisabled:k,isInviteOutdated:S},c),L.a.createElement(En,null,h),L.a.createElement(gn,{"data-test":"row_collab_dropdown_wrapper"},L.a.createElement(gi,{permission:l,disabled:x,isSelf:E,isOutsider:r,onChange:function(e,t){n.onChange&&n.onChange(e,t)},onRemove:function(){n.onRemove&&n.onRemove()},"data-test":"row_collab_dropdown","data-disabled":x,isInviteOutdated:S,isDepartment:f})))}var _i,Ei,wi,ki,Oi,yi,ji,Ci,Si,Ri,Mi,Di,Ti,Ii,Ai,Bi;function Li(e,t,n,i){return void 0===n&&(n="patch"),"post"!==n?lt("/files/"+e+"/collaborators/"+t,{role:i}):at("/files/"+e+"/collaborators/",{userId:t,role:i})}function Ni(e,t,n){return void 0===n&&(n="patch"),Li(e,t,n,"commentator")}function Pi(e,t,n){return void 0===n&&(n="patch"),Li(e,t,n,"reader")}function Hi(e,t,n){return void 0===n&&(n="patch"),Li(e,t,n,"editor")}function zi(e,t,n){return void 0===n&&(n="patch"),Li(e,t,n,"none")}function Vi(e,t){return ot("/files/"+e+"/collaborators/"+t)}function Fi(e,t){return lt("/files/"+e+"/dep_collaborators/"+t,{role:"commentator"})}function Wi(e,t){return lt("/files/"+e+"/dep_collaborators/"+t,{role:"reader"})}function Xi(e,t){return lt("/files/"+e+"/dep_collaborators/"+t,{role:"editor"})}function Ui(e,t){return lt("/files/"+e+"/dep_collaborators/"+t,{role:"none"})}function Yi(e,t){return ot("/files/"+e+"/dep_collaborators/"+t)}function Gi(e,t){return e.then(function(e){return ai.success(t.doneMessage),e}).catch(function(e){ai.warning(e.error||t.errorMessage)})}function Ki(e,t){return Gi(e,{doneMessage:M()(_i=_i||Object(A.__makeTemplateObject)([""," 的权限已设置为管理者"],[""," 的权限已设置为管理者"]),t),errorMessage:M()(Ei=Ei||Object(A.__makeTemplateObject)([""," 的权限设置失败"],[""," 的权限设置失败"]),t)})}function qi(e,t){return Gi(e,{doneMessage:M()(wi=wi||Object(A.__makeTemplateObject)([""," 的权限已移除"],[""," 的权限已移除"]),t),errorMessage:M()(ki=ki||Object(A.__makeTemplateObject)([""," 的权限移除失败"],[""," 的权限移除失败"]),t)})}function Ji(e,t){return Gi(e,{doneMessage:M()(Oi=Oi||Object(A.__makeTemplateObject)([""," 的权限已修改为「可以编辑」"],[""," 的权限已修改为「可以编辑」"]),t),errorMessage:M()(yi=yi||Object(A.__makeTemplateObject)([""," 的权限调整失败"],[""," 的权限调整失败"]),t)})}function Zi(e,t){return Gi(e,{doneMessage:M()(ji=ji||Object(A.__makeTemplateObject)([""," 的权限已修改为「只能阅读」"],[""," 的权限已修改为「只能阅读」"]),t),errorMessage:M()(Ci=Ci||Object(A.__makeTemplateObject)([""," 的权限调整失败"],[""," 的权限调整失败"]),t)})}function $i(e,t){return Gi(e,{doneMessage:M()(Si=Si||Object(A.__makeTemplateObject)([""," 的权限已修改为「只能评论」"],[""," 的权限已修改为「只能评论」"]),t),errorMessage:M()(Ri=Ri||Object(A.__makeTemplateObject)([""," 的权限调整失败"],[""," 的权限调整失败"]),t)})}function Qi(e,t){return Gi(e,{doneMessage:M()(Mi=Mi||Object(A.__makeTemplateObject)([""," 的权限已修改为「禁止访问」"],[""," 的权限已修改为「禁止访问」"]),t),errorMessage:M()(Di=Di||Object(A.__makeTemplateObject)([""," 的权限调整失败"],[""," 的权限调整失败"]),t)})}function ea(e,t){return Gi(e,{doneMessage:M()(Ti=Ti||Object(A.__makeTemplateObject)([""," 的权限已移除"],[""," 的权限已移除"]),t),errorMessage:M()(Ii=Ii||Object(A.__makeTemplateObject)([""," 的权限移除失败"],[""," 的权限移除失败"]),t)})}Object(_.minify)(!1);var ta,na=_.StyleSheet.create({collab_list:{marginTop:"9px"}}),ia=(ta=L.a.Component,Object(A.__extends)(aa,ta),aa.prototype.render=function(){var t=this,n=this.props.me,e=this.context,i=e.all.collabs,a=e.file,r=e.isDesktopVersion,o=e.parentFileGuid;if(!a)return null;var l=this.state,s=l.superiorPermissionsShown,c=l.superiorList,d=l.superiorListLoading,p=r?"0"!==o||!o:!a.isSpace&&a.parentRole;return a&&L.a.createElement("div",{className:Object(_.css)(na.collab_list)},p&&L.a.createElement(xn,{permission:a.parentRole,disabled:!a.permissions.collaboratorManageable,onChange:this.handleParentPermissionChange,superiorPermissionsShown:s,onClick:this.handleToggleButtonClick,isDesktopVersion:r}),s&&L.a.createElement(Yn,{parentRole:a.parentRole,isLoading:d,list:c,me:n}),i.map(function(e){return L.a.createElement(xi,{key:(e.isDepartment?"department_":"person_")+e.id,isDepartment:e.isDepartment,avatar:e.avatar,name:e.name,email:e.email,id:e.id,teamId:e.teamId,description:e.description,permission:e.role,disabled:!a.permissions.collaboratorManageable,isOutsider:e.isOutsider,isSelf:e.id===n.id&&!e.isDepartment,isDisabled:e.disabled,status:e.status,onChange:t.handlePermissionChange(e.id,e.name,e.isDepartment),onRemove:t.handlePermissionRemove(e.id,e.name,e.isDepartment)})}))},aa.contextType=gt,aa);function aa(){var s=null!==ta&&ta.apply(this,arguments)||this;return s.state={list:[],superiorList:[],superiorPermissionsShown:!1,superiorListLoading:!0},s.handlePermissionChange=function(r,o,l){return function(e,t){var n,i,a=s.context.file;a&&(n=a.guid,i=t?"patch":"post",l?"edit"===e?Ji(Xi(n,r),o).then(s.refreshList):"comment"===e?$i(Fi(n,r),o).then(s.refreshList):"read"===e?Zi(Wi(n,r),o).then(s.refreshList):"none"===e&&Qi(Ui(n,r),o).then(s.refreshList):"edit"===e?Ji(Hi(n,r,i),o).then(s.refreshList):"comment"===e?$i(Ni(n,r,i),o).then(s.refreshList):"read"===e?Zi(Pi(n,r,i),o).then(s.refreshList):"none"===e&&Qi(zi(n,r,i),o).then(s.refreshList))}},s.handlePermissionRemove=function(n,i,a){return function(){var e,t=s.context.file;t&&(e=t.guid,a?ea(Yi(e,n),i).then(s.refreshList):ea(Vi(e,n),i).then(s.refreshList))}},s.handleParentPermissionChange=function(o){return Object(A.__awaiter)(s,void 0,void 0,function(){var a,r;return Object(A.__generator)(this,function(e){switch(e.label){case 0:return(a=this.context.file)?(r=a.guid,[4,(t=lt("/files/"+r,{parentRole:o}),n=o,i=function(){switch(n){case"commentator":return M()("只能评论");case"editor":return M()("可以编辑");case"inherited":return M()("继承权限");case"none":return M()("没有权限");case"reader":return M()("只能阅读");default:return""}}(),Gi(t,{doneMessage:M()(Ai=Ai||Object(A.__makeTemplateObject)(["上级目录协作者 的权限调整为「","」"],["上级目录协作者 的权限调整为「","」"]),i),errorMessage:M()(Bi=Bi||Object(A.__makeTemplateObject)(["上级目录协作者 的权限调整失败"],["上级目录协作者 的权限调整失败"]))}))]):[2];case 1:return e.sent(),this.refreshList(),this.state.superiorPermissionsShown&&this.refreshSuperiorList(),[2]}var t,n,i})})},s.handleToggleButtonClick=function(){s.state.superiorPermissionsShown?s.setState({superiorPermissionsShown:!1,superiorListLoading:!1}):(s.setState({superiorPermissionsShown:!0}),s.refreshSuperiorList())},s.refreshList=function(){s.context.refresh()},s.refreshSuperiorList=function(){var a=s.context.file;a&&s.setState({superiorListLoading:!0},function(){return Object(A.__awaiter)(s,void 0,void 0,function(){var t,n,i;return Object(A.__generator)(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,function(t){return Object(A.__awaiter)(this,void 0,void 0,function(){return Object(A.__generator)(this,function(e){switch(e.label){case 0:return[4,nt("/v2/files/"+t+"/collaborators",{includeInherited:!0,includeAdmin:!1,includeSelf:!1})];case 1:return[2,dt(e.sent().roles,!1)]}})})}(a.guid)];case 1:return t=e.sent(),this.setState({superiorList:t,superiorListLoading:!1}),[3,3];case 2:return n=e.sent(),i=this.props.onError,(void 0===i?function(){}:i)(n),this.setState({superiorListLoading:!1}),[3,3];case 3:return[2]}})})})},s}var ra,oa,la=(ra=L.a.Component,Object(A.__extends)(sa,ra),sa.prototype.render=function(){var e=this.props,t=e.name,n=e.onConfirm,i=e.onClose,a=e.arrowDirection,r=void 0===a?"up":a;return L.a.createElement(oi,{title:M()("确定移除管理者权限？"),description:M()(oa=oa||Object(A.__makeTemplateObject)(["移除管理者权限后，"," 将变为「有编辑权限的协作者」，并出现在协作者列表里"],["移除管理者权限后，"," 将变为「有编辑权限的协作者」，并出现在协作者列表里"]),t),okText:M()("确定移除"),style:{width:"230px"},arrowLeftPosition:186,arrowDirection:r,onConfirm:n,onClose:i})},sa);function sa(){return null!==ra&&ra.apply(this,arguments)||this}Object(_.minify)(!1);var ca,da=_.StyleSheet.create({remove_admin_item:{textAlign:"left",position:"relative",padding:"12px 20px",fontSize:"12px",":hover":{backgroundColor:"#E6E7E8"}},remove_admin_item_button:{color:"#CD4747",cursor:"pointer"},remove_admin_item_button_disabled:{color:"#ccc",cursor:"not-allowed"}}),pa=(ca=L.a.Component,Object(A.__extends)(ma,ca),ma.prototype.render=function(){var e=this.props.disabled,t=void 0!==e&&e;return L.a.createElement("div",{className:Object(_.css)(da.remove_admin_item)},L.a.createElement("div",{className:Object(_.css)(da.remove_admin_item_button,t&&da.remove_admin_item_button_disabled),onClick:this.handleRemoveButtonClick},M()("移除管理者权限")))},ma);function ma(){var t=null!==ca&&ca.apply(this,arguments)||this;return t.handleRemoveButtonClick=function(e){Ht(),setTimeout(function(){var e=t.props.onClick;e&&e()},0)},t}var ua=a.a.div(Object(A.__makeTemplateObject)(["\n  position: relative;\n  display: inline-block;\n  vertical-align: middle;\n  width: 80px;\n  height: 24px;\n  line-height: 24px;\n  background-color: ",";\n  color: ",";\n  cursor: ",";\n  border: 1px solid #e5e5e5;\n  border-radius: 1px;\n  text-align: center;\n  text-overflow: ellipsis;\n  overflow: hidden;\n  white-space: nowrap;\n"],["\n  position: relative;\n  display: inline-block;\n  vertical-align: middle;\n  width: 80px;\n  height: 24px;\n  line-height: 24px;\n  background-color: ",";\n  color: ",";\n  cursor: ",";\n  border: 1px solid #e5e5e5;\n  border-radius: 1px;\n  text-align: center;\n  text-overflow: ellipsis;\n  overflow: hidden;\n  white-space: nowrap;\n"]),function(e){return e.disabled?"#f7f7f7":"#fff"},function(e){return e.disabled?"#ccc":"#666"},function(e){return e.disabled?"not-allowed":"pointer"});function ha(e){return"admin"===e?M()("管理者"):M()("设为管理者")}var ba,fa,ga=(ba=L.a.Component,Object(A.__extends)(va,ba),va.prototype.componentDidUpdate=function(e){var t=this.props.permission;t!==e.permission&&this.setState({permission:t,showConfirmDialog:!1})},va.prototype.render=function(){var e,t=this,n=this.props,i=n.disabled,a=void 0!==i&&i,r=n.name,o=n.isOutsider,l=void 0!==o&&o,s=n.isInviteOutdated,c=void 0!==s&&s,d=n.isEnterprise,p=n.onAdd,m=this.state,u=m.permission,h=m.showConfirmDialog,b=m.showOutsiderTooltip,f=null!==(e=zt(this.context.file))&&void 0!==e?e:"",g=d?M()("企业"):r,v=document.documentElement.getBoundingClientRect(),x=v.width,_=v.height;return"admin"!==u?L.a.createElement(L.a.Fragment,null,L.a.createElement(ua,{disabled:a,"data-test":"set_admin","data-disabled":a,onClick:this.handleSetAdminButtonClick,onMouseEnter:this.handleSetAdminButtonMouseEnter,onMouseLeave:this.handleSetAdminButtonMouseLeave,innerRef:this.onSetAdminRef},ha(u),b&&this.setAdminButtonRef.current&&L.a.createElement(et,{innerRef:this.setAdminButtonRef},function(e){if(e&&a&&l){var t=Object(Z.isSelfHosted)()?M()("私有化环境不能添加外部协作者"):M()("外部协作者不可成为管理者");return L.a.createElement(Et,{style:{position:"absolute",right:x-e.right+"px",top:e.top+e.height+10+"px"},arrowLeftPosition:119},t)}return null})),h&&this.setAdminButtonRef&&L.a.createElement(et,{innerRef:this.setAdminButtonRef},function(e){return e?e.top+e.height+10+191>_?L.a.createElement("div",{id:"confirm-dialog-add-department",style:{position:"absolute",right:x-e.right+"px",bottom:_-e.top+10+"px"}},L.a.createElement(si,{name:r,departmentName:g,fileType:f,onConfirm:p,onClose:t.handleHideConfirmDialog,arrowDirection:"down"})):L.a.createElement("div",{id:"confirm-dialog-add-department",style:{position:"absolute",right:x-e.right+"px",top:e.top+e.height+10+"px"}},L.a.createElement(si,{name:r,departmentName:g,fileType:f,onConfirm:p,onClose:t.handleHideConfirmDialog})):null})):L.a.createElement(L.a.Fragment,null,L.a.createElement(Rt,{buttonText:ha(u),disabled:a,renderHover:this.onRenderHover,getInnerRef:this.onWrapperRef,childrenHeight:111,isRemove:c,onRemove:this.handleRemoveAdmin},L.a.createElement(Wt,{onClick:this.handleNormalItemClick("admin"),title:M()("管理者"),checked:"admin"===u,disabled:!1}),u&&L.a.createElement(L.a.Fragment,null,L.a.createElement(pi,null),L.a.createElement(pa,{onClick:this.handleShowConfirmDialog}))),h&&this.wrapperRef&&L.a.createElement(et,{innerRef:this.wrapperRef},function(e){return e?e.top+e.height+10+191>_?L.a.createElement("div",{id:"confirm-dialog-remove-user-permission",style:{position:"absolute",right:x-e.right+"px",bottom:_-e.top+10+"px"}},L.a.createElement(la,{name:r,onConfirm:t.handleRemoveAdmin,onClose:t.handleHideConfirmDialog,arrowDirection:"down"})):L.a.createElement("div",{id:"confirm-dialog-remove-user-permission",style:{position:"absolute",right:x-e.right+"px",top:e.top+e.height+10+"px"}},L.a.createElement(la,{name:r,onConfirm:t.handleRemoveAdmin,onClose:t.handleHideConfirmDialog})):null}))},va.contextType=gt,va);function va(e){var u=ba.call(this,e)||this;u.wrapperRef=null,u.setAdminButtonRef=L.a.createRef(),u.handleSetAdminButtonClick=function(e){var t=u.props,n=t.disabled,i=void 0!==n&&n,a=t.isDepartment,r=t.onAdd,o=u.context.file;a&&null!=o&&o.isSpace&&!o.teamId?ai.warning(M()("此空间归属个人所有，添加部门管理前请先移交给企业。")):i||(a?u.handleShowSetAdminDialog():null!=r&&r())},u.handleNormalItemClick=function(e){return function(){u.setState({permission:e})}},u.handleShowConfirmDialog=function(){var n;u.state.showConfirmDialog||(u.setState({showConfirmDialog:!0}),n=function(e){var t=document.getElementById("confirm-dialog-remove-user-permission");t&&!t.contains(e.target)&&(u.setState({showConfirmDialog:!1}),document.removeEventListener("click",n))},document.addEventListener("click",n))},u.handleHideConfirmDialog=function(){u.state.showConfirmDialog&&u.setState({showConfirmDialog:!1})},u.handleShowSetAdminDialog=function(){u.state.showConfirmDialog||u.setState({showConfirmDialog:!0})},u.handleRemoveAdmin=function(){var e=u.props.onRemove;null!=e&&e()},u.onRenderHover=function(e){var t=u.props,n=t.disabled,a=void 0!==n&&n,i=t.isInherited,r=void 0!==i&&i,o=t.isAdmin,l=t.isSelf,s=void 0!==l&&l,c=t.isDesktopVersion,d=void 0!==c&&c,p=u.context.file,m=document.documentElement.getBoundingClientRect().width;return L.a.createElement(et,{innerRef:e},function(e){if(e&&a){if(r){var t=s&&d,n=t?M()(fa=fa||Object(A.__makeTemplateObject)(["你是","所在目录的管理者，无法直接退出协作。如希望转交管理权，可添加其他人为管理者，并让对方将该文件移动到他/她的桌面上"],["你是","所在目录的管理者，无法直接退出协作。如希望转交管理权，可添加其他人为管理者，并让对方将该文件移动到他/她的桌面上"]),null!=p&&p.isFolder?M()("文件夹"):M()("文件")):M()("上级目录管理者，不可移除"),i=t?153:118;return L.a.createElement(Et,{style:{position:"absolute",right:m-e.right+"px",top:e.top+e.height+10+"px",width:t?"175px":void 0},arrowLeftPosition:i},n)}return o?L.a.createElement(Et,{style:{position:"absolute",right:m-e.right+"px",top:e.top+e.height+10+"px"},arrowLeftPosition:129},M()("可在管理者页面移除该管理者")):L.a.createElement(Et,{style:{position:"absolute",right:m-e.right+"px",top:e.top+e.height+10+"px"},arrowLeftPosition:94},M()("无权更改管理者的权限"))}return null})},u.handleSetAdminButtonMouseEnter=function(e){u.state.showOutsiderTooltip||u.setState({showOutsiderTooltip:!0})},u.handleSetAdminButtonMouseLeave=function(e){u.state.showOutsiderTooltip&&u.setState({showOutsiderTooltip:!1})},u.onSetAdminRef=function(e){u.setAdminButtonRef={current:e}},u.onWrapperRef=function(e){u.wrapperRef=e};var t=e.permission;return u.state={permission:null!=t?t:null,showConfirmDialog:!1,showOutsiderTooltip:!1},u}function xa(t){var e=Object(A.__read)(Object(B.useState)(!1),2),n=e[0],i=e[1],a=t.permission,r=void 0===a?null:a,o=t.name,l=void 0===o?"":o,s=t.id,c=t.email,d=t.teamId,p=t.description,m=void 0===p?"":p,u=t.isDepartment,h=void 0!==u&&u,b=t.avatar,f=t.disabled,g=void 0!==f&&f,v=t.isSelf,x=void 0!==v&&v,_=t.isDesktopVersion,E=void 0!==_&&_,w=t.isInherited,k=void 0!==w&&w,O=t.isOutsider,y=void 0!==O&&O,j=t.isDisabled,C=void 0!==j&&j,S=t.isAdmin,R=t.withRemoveButton,M=void 0!==R&&R,D=t.status,T=t.onRecentRemove,I=-1===D&&!m;return L.a.createElement(bn,{isMobile:N,onMouseEnter:function(){i(!0)},onMouseLeave:function(){i(!1)},"data-test":"row_admin"},M&&n&&L.a.createElement(F,{onClick:T,style:{position:"absolute",left:"20px",top:"15px"}}),h?L.a.createElement(In,null):L.a.createElement(Hn,{src:null!=b?b:"",name:l,userId:s,email:c,teamId:d}),L.a.createElement(sn,{isSelf:x,isOutsider:y,isDisabled:C,isInviteOutdated:I},l),L.a.createElement(En,null,m),L.a.createElement(gn,{"data-disabled":g,"data-test":"row_admin_dropdown_wrapper"},L.a.createElement(ga,{name:l,permission:r,disabled:g,isInherited:k,isOutsider:y,isAdmin:S,isDepartment:h,onAdd:function(){var e=t.onAdd;null!=e&&e()},onRemove:function(){var e=t.onRemove;null!=e&&e()},isSelf:x,isDesktopVersion:E,"data-disabled":g,"data-test":"row_admin_dropdown",isInviteOutdated:I})))}function _a(e,t){return rt("/files/"+e+"/dep_admins/"+t)}function Ea(e,t){return ot("/files/"+e+"/dep_admins/"+t)}function wa(e,t){return rt("/files/"+e+"/admins/"+t)}function ka(e,t){return ot("/files/"+e+"/admins/"+t)}var Oa,ya=a.a.div(Object(A.__makeTemplateObject)(["\n  margin-top: 9px;\n  padding-bottom: ",";\n"],["\n  margin-top: 9px;\n  padding-bottom: ",";\n"]),function(e){return e.isMobile?"15px":"auto"}),ja=(Oa=L.a.Component,Object(A.__extends)(Ca,Oa),Ca.prototype.render=function(){var t=this,n=this.props.me,e=this.context,i=e.all.admins,a=e.file,r=e.isEnterpriseAdmin,o=e.isDesktopVersion;return a&&L.a.createElement(ya,{isMobile:N},i.map(function(e){return L.a.createElement(xa,{key:(e.isDepartment?"department_":"person_")+e.id,isDepartment:e.isDepartment,name:e.name,description:e.description,avatar:e.avatar,permission:"admin",isSelf:e.id===n.id&&!e.isDepartment,onRemove:t.handleRemoveAdmin(e.id,e.name,e.isDepartment),disabled:!a.permissions.adminManageable&&!r||e.isInherited,isInherited:e.isInherited||!1,isDisabled:e.disabled||!1,isAdmin:a.permissions.adminManageable,isDesktopVersion:o,id:e.id,email:e.email,teamId:e.teamId,status:e.status})}))},Ca.contextType=gt,Ca);function Ca(){var r=null!==Oa&&Oa.apply(this,arguments)||this;return r.state={list:[]},r.handleAddAdminButtonClick=function(){var e=r.props.onClick;e&&e()},r.handleRemoveAdmin=function(n,i,a){return function(){var e,t=r.context.file;t&&(e=t.guid,a?qi(Ea(e,n),i).then(r.refreshList):qi(ka(e,n),i).then(r.refreshList))}},r.refreshList=function(){(0,r.context.refresh)()},r}var Sa,Ra=n(951),Ma=n.n(Ra),Da="icon_add_collab";Object(_.minify)(!1);var Ta=_.StyleSheet.create(((Sa={})[Da]={display:"inline-block",verticalAlign:"middle"},Sa));function Ia(e){var t=e.style,n=void 0===t?{}:t;return L.a.createElement("img",{src:Ma.a,height:"14",width:"14",className:Object(_.css)(Ta[Da]),style:n})}var Aa,Ba=a.a.div(Object(A.__makeTemplateObject)(["\n  text-align: center;\n  background-image: linear-gradient(-180deg, #41464b 0%, #2c3033 100%);\n  border-width: 1px;\n  border-style: solid;\n  border-color: ",";\n  border-radius: 2px;\n  font-size: 14px;\n  color: #fff;\n  cursor: pointer;\n  position: relative;\n  height: 32px;\n  line-height: 32px;\n  background-color: ",";\n  min-width: 150px;\n  max-width: 185px;\n"],["\n  text-align: center;\n  background-image: linear-gradient(-180deg, #41464b 0%, #2c3033 100%);\n  border-width: 1px;\n  border-style: solid;\n  border-color: ",";\n  border-radius: 2px;\n  font-size: 14px;\n  color: #fff;\n  cursor: pointer;\n  position: relative;\n  height: 32px;\n  line-height: 32px;\n  background-color: ",";\n  min-width: 150px;\n  max-width: 185px;\n"]),function(e){return e.disabled?"#c6c7c9":"#41464b"},function(e){return e.disabled?"#d9dadb":"black"}),La=a.a.div(Object(A.__makeTemplateObject)(["\n  padding: 0 20px;\n  height: 32px;\n  background-image: ",";\n  background-color: ",";\n  border-color: ",";\n  cursor: ",";\n"],["\n  padding: 0 20px;\n  height: 32px;\n  background-image: ",";\n  background-color: ",";\n  border-color: ",";\n  cursor: ",";\n"]),function(e){return e.disabled?"none":"inherit"},function(e){return e.disabled?"#ccc":"inherit"},function(e){return e.disabled?"#ccc":"inherit"},function(e){return e.disabled?"not-allowed":"pointer"}),Na=a.a.span(Object(A.__makeTemplateObject)(["\n  display: inline-block;\n  vertical-align: baseline;\n  margin-left: 15px;\n"],["\n  display: inline-block;\n  vertical-align: baseline;\n  margin-left: 15px;\n"])),Pa=(Aa=L.a.Component,Object(A.__extends)(Ha,Aa),Ha.prototype.render=function(){var t=this,e=this.props.disabled,n=void 0===e||e,i=this.state.hover;return L.a.createElement(Ba,{disabled:n,"data-test":"collab_button_wrapper","data-disabled":n},L.a.createElement(La,{"data-test":"collab_button","data-disabled":n,disabled:n,onClick:this.handleClick,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,innerRef:function(e){return t.wrapperRef={current:e}}},L.a.createElement(Ia,{style:{marginTop:"-5px"}}),L.a.createElement(Na,null,M()("添加协作者"))),i&&n&&L.a.createElement(et,{innerRef:this.wrapperRef},function(e){return e&&L.a.createElement(Et,{style:{position:"absolute",left:e.left+23+"px",top:e.top+e.height+10+"px"},arrowLeftPosition:48},M()("无权添加协作者"))}))},Ha);function Ha(){var a=null!==Aa&&Aa.apply(this,arguments)||this;return a.wrapperRef=L.a.createRef(),a.state={hover:!1},a.handleClick=function(e){var t=a.props,n=t.onClick,i=t.disabled;void 0!==i&&i||n&&n()},a.handleMouseEnter=function(){a.state.hover||a.setState({hover:!0})},a.handleMouseLeave=function(){a.state.hover&&a.setState({hover:!1})},a}var za,Va=n(953),Fa=n.n(Va),Wa="icon_setting";Object(_.minify)(!1);var Xa=_.StyleSheet.create(((za={})[Wa]={display:"inline-block",verticalAlign:"middle"},za));function Ua(e){var t=e.style,n=void 0===t?{}:t;return L.a.createElement("img",{src:Fa.a,height:"12",width:"12",className:Object(_.css)(Xa[Wa]),style:n})}var Ya,Ga=a.a.div(Object(A.__makeTemplateObject)(["\n  display: inline-block;\n  height: 12px;\n  line-height: 12px;\n  position: relative;\n  cursor: pointer;\n"],["\n  display: inline-block;\n  height: 12px;\n  line-height: 12px;\n  position: relative;\n  cursor: pointer;\n"])),Ka=a.a.span(Object(A.__makeTemplateObject)(["\n  margin-left: 17px;\n"],["\n  margin-left: 17px;\n"])),qa=(Ya=L.a.Component,Object(A.__extends)(Ja,Ya),Ja.prototype.render=function(){return L.a.createElement(Ga,{onClick:this.handleClick},L.a.createElement(Ua,{style:{position:"absolute",top:"0",left:"0"}}),L.a.createElement(Ka,null,M()("设置")))},Ja);function Ja(){var n=null!==Ya&&Ya.apply(this,arguments)||this;return n.handleClick=function(e){var t=n.props.onClick;t&&t()},n}var Za,$a=n(93),Qa=n.n($a),er=a.a.div(Object(A.__makeTemplateObject)(["\n  margin-top: 9px;\n  height: ",";\n"],["\n  margin-top: 9px;\n  height: ",";\n"]),function(e){return e.isMobile?"calc(100% - 9px)":"auto"}),tr=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,nr=/1[3-9][0-9]{9}$/,ir=(Za=L.a.Component,Object(A.__extends)(ar,Za),ar.prototype.componentDidMount=function(){var e=this.props.keyword;this.renderSearchList(e),this.prevKeyword=e},ar.prototype.componentWillUpdate=function(e){var t=e.keyword;this.prevKeyword!==t&&(this.renderSearchList(t),this.prevKeyword=t)},ar.prototype.renderItem=function(e,t,n,i,a){return i?L.a.createElement(xi,{key:"person_"+a.id,isDepartment:!1,name:a.name,avatar:a.avatar,id:a.id,email:a.email,teamId:a.teamId,description:a.description,permission:a.role,disabled:!t.permissions.collaboratorManageable||Object(Z.isSelfHosted)()&&a.isOutsider,isOutsider:!0,isSelf:!1,isDisabled:!1,status:a.status,onChange:this.handleInvite(i,a.description)}):e?L.a.createElement(xa,{key:(a.isDepartment?"department_":"person_")+a.id,isDepartment:a.isDepartment,name:a.name,avatar:a.avatar,id:a.id,email:a.email,teamId:a.teamId,description:a.description,permission:a.role,disabled:!t.permissions.adminManageable&&!this.context.isEnterpriseAdmin||a.isInherited||a.isOutsider,isSelf:n.id===a.id&&!a.isDepartment,isInherited:a.isInherited||!1,isOutsider:a.isOutsider,isDisabled:a.disabled,status:a.status,isAdmin:t.permissions.adminManageable,onAdd:this.handleAddAdmin(a.id,a.name,a.isDepartment),onRemove:this.handleRemoveAdmin(a.id,a.name,a.isDepartment)}):"admin"===a.role?L.a.createElement(xa,{key:(a.isDepartment?"department_":"person_")+a.id,isDepartment:a.isDepartment,name:a.name,avatar:a.avatar,id:a.id,email:a.email,teamId:a.teamId,description:a.description,permission:a.role,disabled:!0,status:a.status,isSelf:n.id===a.id&&!a.isDepartment,isInherited:a.isInherited||!1,isOutsider:a.isOutsider,isDisabled:a.disabled,isAdmin:t.permissions.adminManageable}):L.a.createElement(xi,{key:(a.isDepartment?"department_":"person_")+a.id,isDepartment:a.isDepartment,name:a.name,avatar:a.avatar,id:a.id,email:a.email,teamId:a.teamId,description:a.description,permission:a.role,disabled:!t.permissions.collaboratorManageable||Object(Z.isSelfHosted)()&&a.isOutsider,isOutsider:a.isOutsider,isSelf:n.id===a.id&&!a.isDepartment,isDisabled:a.disabled,status:a.status,onChange:this.handleChangeCollab(a.id,a.name,a.isDepartment),onRemove:this.handleRemoveCollab(a.id,a.name,a.isDepartment)})},ar.prototype.render=function(){var t=this,e=this.props,n=e.width,i=e.height,a=e.admin,r=void 0!==a&&a,o=e.me,l=e.keyword,s=this.state.searchResults,c=this.context,d=c.all,p=c.file,m=r?d.admins:d.admins.concat(d.collabs),u=s.map(function(t){var e=m[Qa()(m,function(e){return e.id===t.id&&e.isDepartment===t.isDepartment})];return{id:t.id,name:t.name,description:t.description,role:e?e.role:null,isDepartment:t.isDepartment,isOutsider:t.isOutsider,isInherited:!!e&&e.isInherited,avatar:t.avatar,disabled:t.disabled||!!e&&e.disabled,email:t.email,teamId:t.teamId}});if(0<u.length&&p)return tr.test(l)&&u.every(function(e){return e.email!==l})&&(b=this.cachedInviter.keyword===l?this.cachedInviter.permission:null,u.unshift({id:-1,name:M()("待接受邀请"),description:l,role:b,isDepartment:!1,isOutsider:!0,isInherited:!1,avatar:"https://assets.smcdn.cn/assets/images/invited-f41924e412.png",disabled:!p.permissions.collaboratorManageable,email:l,status:-1})),L.a.createElement(er,{isMobile:N},L.a.createElement(Xe,{width:n,height:i,wrapperHeight:N?"100%":""},u.map(function(e){return t.renderItem(r,p,o,null,e)})));if(u.length<=0&&p){var h=this.props.keyword,b=this.cachedInviter.keyword===h?this.cachedInviter.permission:null;if(tr.test(h))return L.a.createElement(er,{isMobile:N},L.a.createElement(Xe,{width:n,height:i,wrapperHeight:N?"100%":""},this.renderItem(!1,p,o,"email",{id:-1,name:M()("待接受邀请"),description:h,role:b,isDepartment:!1,isOutsider:!0,isInherited:!1,avatar:"https://assets.smcdn.cn/assets/images/invited-f41924e412.png",disabled:p.permissions.collaboratorManageable,email:h,status:-1})));if(nr.test(h))return L.a.createElement(er,{isMobile:N},L.a.createElement(Xe,{width:n,height:i,wrapperHeight:N?"100%":""},this.renderItem(!1,p,o,"mobile",{id:-1,name:M()("待接受邀请"),description:h,role:b,isDepartment:!1,isOutsider:!0,isInherited:!1,avatar:"https://assets.smcdn.cn/assets/images/invited-f41924e412.png",disabled:p.permissions.collaboratorManageable,status:-1})))}return null},ar.contextType=gt,ar);function ar(){var c=null!==Za&&Za.apply(this,arguments)||this;return c.state={searchResults:[]},c.prevKeyword="",c.cachedInviter={keyword:"",permission:null},c.handleAddAdmin=function(t,n,i){return function(){var e=c.context.file;e&&(i?Ki(_a(e.guid,t),n).then(c.refreshList):Ki(wa(e.guid,t),n).then(c.refreshList))}},c.handleRemoveAdmin=function(t,n,i){return function(){var e=c.context.file;e&&(i?qi(Ea(e.guid,t),n).then(c.refreshList):qi(ka(e.guid,t),n).then(c.refreshList))}},c.handleInvite=function(l,s){return function(e){var t,n,i,a,r,o=c.context.file;o&&(t=o.guid,n="edit"===(i=e)?"editor":"comment"===i?"commentator":"read"===i?"reader":"none"===i?"none":"editor",c.cachedInviter={keyword:s,permission:e},"email"===l?(void 0===(r=n)&&(r="editor"),Gi(at("/files/"+t+"/collaborators",{email:s,role:r}),{doneMessage:M()("邀请邮件已发送"),errorMessage:M()("邀请失败")}).then(c.refreshList)):"mobile"===l&&(void 0===(a=n)&&(a="editor"),Gi(at("/files/"+t+"/collaborators",{mobile:s,role:a}),{doneMessage:M()("邀请短信已发送"),errorMessage:M()("邀请失败")}).then(c.refreshList)))}},c.handleChangeCollab=function(r,o,l){return function(e,t){var n,i,a=c.context.file;a&&(n=a.guid,i=t?"patch":"post",l?"edit"===e?Ji(Xi(n,r),o).then(c.refreshList):"comment"===e?$i(Fi(n,r),o).then(c.refreshList):"read"===e?Zi(Wi(n,r),o).then(c.refreshList):"none"===e&&Qi(Ui(n,r),o).then(c.refreshList):"edit"===e?Ji(Hi(n,r,i),o).then(c.refreshList):"comment"===e?$i(Ni(n,r,i),o).then(c.refreshList):"read"===e?Zi(Pi(n,r,i),o).then(c.refreshList):"none"===e&&Qi(zi(n,r,i),o).then(c.refreshList))}},c.handleRemoveCollab=function(n,i,a){return function(){var e,t=c.context.file;t&&(e=t.guid,a?ea(Yi(e,n),i).then(c.refreshList):ea(Vi(e,n),i).then(c.refreshList))}},c.refreshList=function(){(0,c.context.refresh)()},c.renderSearchList=function(e){if(e.length<=0)c.setState({searchResults:[]});else{var t=c.context.file;if(!t)return;var n=c.props.teamId,i=t.guid,a=c.context.isEnterpriseVersion?ht:bt,r=!c.context.isDesktopVersion;a(i,e,n,t.id,r).then(function(e){c.setState({searchResults:e})})}},c}var rr,or=n(40),lr=n(12),sr=n(21),cr=n(20),dr=n(36),pr=n(33),mr=n(952),ur=n.n(mr),hr="icon_wechat";Object(_.minify)(!1);var br=_.StyleSheet.create(((rr={})[hr]={display:"inline-block",verticalAlign:"middle",marginRight:"8px"},rr));function fr(e){var t=e.style,n=void 0===t?{}:t;return L.a.createElement("img",{src:ur.a,height:"16",width:"16",className:Object(_.css)(br[hr]),style:n})}Object(_.minify)(!1);var gr,vr=_.StyleSheet.create({reason_node_wrapper:{fontSize:"12px",lineHeight:"1.8",color:"#666",margin:"5px 10px",textAlign:"left",position:"relative"},reason_node_link:{color:"#6da0e3",position:"absolute",right:0,bottom:0},reason_node_message:{textAlign:"left"},reason_node_plain_message:{textAlign:"left",margin:"0 2px",lineLeight:1.375,minWidth:"140px"},reason_node_p:{margin:"0"}}),xr=function(e){var t=e.children;return L.a.createElement("div",{className:Object(_.css)(vr.reason_node_wrapper)},t)},_r=function(e){var t=e.children;return L.a.createElement("div",{className:Object(_.css)(vr.reason_node_link)},t)},Er=function(e){var t=e.children;return L.a.createElement("p",{className:Object(_.css)(vr.reason_node_message)},t)},wr=function(e){var t=e.children;return L.a.createElement("p",{className:Object(_.css)(vr.reason_node_plain_message)},t)};var kr=a.a.span(Object(A.__makeTemplateObject)(["\n  display: inline-block;\n  margin-left: 10px;\n\n  button {\n    pointer-events: ",";\n  }\n"],["\n  display: inline-block;\n  margin-left: 10px;\n\n  button {\n    pointer-events: ",";\n  }\n"]),function(e){return e.disabled?"none":"initial"}),Or=a()(sr.a)(Object(A.__makeTemplateObject)(["\n  width: 148px;\n  position: relative;\n  display: ",";\n"],["\n  width: 148px;\n  position: relative;\n  display: ",";\n"]),function(e){return e.isMobile?"none":"block"}),yr=a.a.div(Object(A.__makeTemplateObject)(["\n  width: auto;\n  height: 140px;\n  background-color: #fff;\n  border: 1px solid #ddd;\n  box-shadow: 0 -4px 12px rgba(0, 0, 0, 0.1);\n  text-align: center;\n  border-radius: 2px;\n  position: absolute;\n  bottom: 38px;\n  left: -4px;\n  padding: 20px 0 17px;\n  letter-spacing: 0;\n"],["\n  width: auto;\n  height: 140px;\n  background-color: #fff;\n  border: 1px solid #ddd;\n  box-shadow: 0 -4px 12px rgba(0, 0, 0, 0.1);\n  text-align: center;\n  border-radius: 2px;\n  position: absolute;\n  bottom: 38px;\n  left: -4px;\n  padding: 20px 0 17px;\n  letter-spacing: 0;\n"])),jr=a.a.p(Object(A.__makeTemplateObject)(["\n  font-size: 12px;\n  line-height: 1;\n  color: #666;\n  margin: 0 0 14px;\n"],["\n  font-size: 12px;\n  line-height: 1;\n  color: #666;\n  margin: 0 0 14px;\n"])),Cr=a.a.img(Object(A.__makeTemplateObject)(["\n  width: 114px;\n  height: 114px;\n  margin: 0 20px;\n  display: block;\n"],["\n  width: 114px;\n  height: 114px;\n  margin: 0 20px;\n  display: block;\n"]));function Sr(e){function o(){at("/files/"+s.guid+"/invite_links").then(function(e){var t=e.wechatQRLink,n=114*window.devicePixelRatio;a(Object(dr.getHost)()+"/qrcode?size="+n+"&margin=0&url="+t)},function(){d(!0),b({theme:"default",node:null}),a("")})}var l=e.me,s=e.file,t=Object(A.__read)(Object(B.useState)(!0),2),c=t[0],d=t[1],n=Object(A.__read)(Object(B.useState)(""),2),i=n[0],a=n[1],r=Object(A.__read)(Object(B.useState)(!1),2),p=r[0],m=r[1],u=Object(A.__read)(Object(B.useState)({theme:"default",node:null}),2),h=u[0],b=u[1],f=Object(B.useCallback)(function(){m(!0)},[]),g=Object(B.useCallback)(function(){m(!1)},[]),v=Object(B.useCallback)(function(){c||p&&Object(lr.a)({moduleName:"add_collaborator",submoduleName:"wechat_invite",actionName:"click_wechat_type"})},[p]);if(Object(B.useEffect)(function(){var e,t,n,i=Object(cr.h)({me:l,file:s}),a=i.disabled,r=i.reason;a?(t=(e=function(e,t){switch(e){case cr.a.OUTSIDER_CANNOT_ADD_USER:return{theme:"default",node:L.a.createElement(wr,null,M()("抱歉，您不是该企业的成"),L.a.createElement("br",null),M()("员，无权限添加协作者。"))};case cr.a.EXPIRED_CANNOT_ADD_USER:return{theme:"white",node:L.a.createElement(xr,null,L.a.createElement(Er,null,M()("您的企业版已到期，协作者人数上限为"),L.a.createElement("br",null),M()("15 人。您可以续费企业版，解锁所有限"),L.a.createElement("br",null),M()("制。")),L.a.createElement(_r,{href:"/enterprise/billing",target:"_blank"},M()("续费企业版 >")))};case cr.a.NOT_ON_SEAT_CANNOT_ADD_USER:return{theme:"white",node:L.a.createElement(xr,null,L.a.createElement(Er,null,M()("您是非席位成员，协作者人数上限为 15"),L.a.createElement("br",null),M()("人。您可以让企业创建者将您设置为席"),L.a.createElement("br",null),M()("位成员，解除所有限制。")))};case cr.a.NO_ACCESS_ADD_OUTSIDER:return{theme:"default",node:L.a.createElement(wr,null,M()("抱歉，根据企业设置，您不能添加非企"),L.a.createElement("br",null),M()("业成员为协作者。请联系企业管理员。"))};case cr.a.NO_ACCESS_ADD_USER:return{theme:"white",node:L.a.createElement(xr,null,L.a.createElement(Er,null,M()("您当前的版本为「基础版」，协作"),L.a.createElement("br",null),M()("者人数上限为 15 人。您可以升级"),L.a.createElement("br",null),M()("到「高级版」或「企业版」，获得"),L.a.createElement("br",null),M()("更多权限。")),L.a.createElement(_r,{href:"/pricing",target:"_blank"},M()("了解更多 >")))};case cr.a.NO_ACCESS_EDIT:return{theme:"default",node:L.a.createElement(wr,null,M()("抱歉，只有权限为“可以编"),L.a.createElement("br",null),M()("辑”的成员能添加协作者"))};case cr.a.NO_ACCESS_MODIFY:return{theme:"default",node:L.a.createElement(wr,null,M()("抱歉，只有权限为“可以编"),L.a.createElement("br",null),M()("辑”的成员能修改他人权限"))};case cr.a.OUTSIDER_CANNOT_MODIFY_ROLE:return{theme:"default",node:L.a.createElement(wr,null,M()("抱歉，只有企业成员能修"),L.a.createElement("br",null),M()("改权限"))};case cr.a.TOO_MANY_COLLABORATORS:return{theme:"default",node:L.a.createElement(wr,null,M()("一次最多添加 20 名协作者"))};case cr.a.FILE_CANNOT_MODIFI_SPACE_COLLAB_ROLE:return{theme:"default",node:L.a.createElement(wr,null,M()(gr=gr||Object(A.__makeTemplateObject)(["已通过团队空间获得","权限"],["已通过团队空间获得","权限"]),t||""))};case"abandon":return{theme:"default",node:L.a.createElement("p",{className:Object(_.css)(vr.reason_node_p)},M()("功能正在修复中"))};default:return{theme:"default",node:L.a.createElement("p",{className:Object(_.css)(vr.reason_node_p)},M()("无权添加协作者"))}}}(r)).theme,n=e.node,b({theme:t,node:n})):a||a===c||(o(),d(!1),b({theme:"default",node:null})),p&&v()},[p,l,s]),Object(Z.isSelfHosted)())return null;var x=c?{opacity:.3}:{opacity:1};return L.a.createElement(Qt.a,{trigger:"hover",theme:h.theme,title:h.node,onMouseEnter:v},L.a.createElement(kr,{disabled:c,"data-test":"wechat_button_wrapper","data-disabled":c},L.a.createElement(Or,{isMobile:N,type:"outline",size:"m",disabled:c,onMouseEnter:f,onMouseLeave:g,"data-disabled":c,"data-test":"wechat_button"},L.a.createElement(fr,{style:x}),M()("添加微信好友"),!c&&L.a.createElement(yr,{style:{display:p?"block":"none"}},L.a.createElement(jr,null,M()("扫码发送"),Object(pr.typeToText)(s.type),M()("给好友")),L.a.createElement(Cr,{src:i})))))}var Rr=n(372),Mr=a.a.div(Object(A.__makeTemplateObject)(["\n  display: inline-block;\n  width: 100%;\n  height: 100%;\n  position: relative;\n"],["\n  display: inline-block;\n  width: 100%;\n  height: 100%;\n  position: relative;\n"])),Dr=a.a.div(Object(A.__makeTemplateObject)(["\n  height: 36px;\n  line-height: 18px;\n  padding: ",";\n  margin-bottom: 4px;\n  overflow: hidden;\n  margin-left: ",";\n"],["\n  height: 36px;\n  line-height: 18px;\n  padding: ",";\n  margin-bottom: 4px;\n  overflow: hidden;\n  margin-left: ",";\n"]),function(e){return e.isMobile?"0 15px":"6px 80px 1px 44px"},function(e){return e.isMobile?"80px":"0"}),Tr=a.a.div(Object(A.__makeTemplateObject)(["\n  position: absolute;\n  right: 48px;\n  top: 5px;\n  display: ",";\n"],["\n  position: absolute;\n  right: 48px;\n  top: 5px;\n  display: ",";\n"]),function(e){return e.isMobile?"none":"block"}),Ir=a.a.div(Object(A.__makeTemplateObject)(["\n  height: 35px;\n  margin-bottom: 12px;\n  padding: ",";\n"],["\n  height: 35px;\n  margin-bottom: 12px;\n  padding: ",";\n"]),function(e){return e.isMobile?"0 10px":"0 40px"}),Ar=a.a.div(Object(A.__makeTemplateObject)(["\n  margin-bottom: ",";\n  height: ",";\n"],["\n  margin-bottom: ",";\n  height: ",";\n"]),function(e){return e.isMobile?"0":"10px"},function(e){return e.isMobile?"calc(100% - 87px)":"340px"}),Br=a.a.div(Object(A.__makeTemplateObject)(["\n  position: relative;\n  height: 340px;\n  margin: 0 40px;\n  display: ",";\n"],["\n  position: relative;\n  height: 340px;\n  margin: 0 40px;\n  display: ",";\n"]),function(e){return e.isMobile?"none":"block"}),Lr=a.a.div(Object(A.__makeTemplateObject)(["\n  margin-left: 5px;\n  float: left;\n"],["\n  margin-left: 5px;\n  float: left;\n"])),Nr=a.a.div(Object(A.__makeTemplateObject)(["\n  position: absolute;\n  top: 10px;\n  right: 15px;\n"],["\n  position: absolute;\n  top: 10px;\n  right: 15px;\n"])),Pr=a.a.div(Object(A.__makeTemplateObject)(["\n  height: 40px;\n  text-align: center;\n  position: relative;\n  padding: ",";\n"],["\n  height: 40px;\n  text-align: center;\n  position: relative;\n  padding: ",";\n"]),function(e){return e.isMobile?"7px 10px 0":"7px 40px 0px 44px"}),Hr=a.a.div(Object(A.__makeTemplateObject)(["\n  position: absolute;\n  top: 8px;\n  left: ",";\n"],["\n  position: absolute;\n  top: 8px;\n  left: ",";\n"]),function(e){return e.isMobile?"15px":"50px"}),zr=a.a.span(Object(A.__makeTemplateObject)(["\n  color: #ccc;\n  line-height: 2;\n  display: block;\n  padding: 15px 40px 10px;\n"],["\n  color: #ccc;\n  line-height: 2;\n  display: block;\n  padding: 15px 40px 10px;\n"]));function Vr(){return L.a.createElement("div",{style:{marginTop:"20px"}},L.a.createElement(kn.a,null))}var Fr;function Wr(){var r=null!==Fr&&Fr.apply(this,arguments)||this;return r.wrapper=L.a.createRef(),r.content=L.a.createRef(),r.head=L.a.createRef(),r.state={searching:!1,searchingVersion:1,keyword:""},r.handleAddCollabButtonClick=function(){var e=r.props.onAddCollabButtonClick;e&&e()},r.handleAddAdminButtonClick=function(){var e=r.props.onAddAdminButtonClick;e&&e()},r.handleBackButtonClick=function(){var e=r.state.searchingVersion;r.setState({searching:!1,searchingVersion:e+1,keyword:""})},r.handleCollabBackButtonClick=function(){history.back()},r.handleInput=function(e){var t=r.state.searching;0<e.length?r.setState({searching:!0,keyword:e}):t&&r.setState({searching:!1,keyword:""})},r.handleSettingButtonClick=function(){var e=r.props.onSettingButtonClick;e&&e()},r.handleXButtonClick=function(){var e=r.props.onXButtonClick;e&&e()},r.handleScroll=function(){var e,t,n,i=r.wrapper.current,a=r.content.current;r.head&&(e=r.head.current,i&&a&&e&&(t=i.getBoundingClientRect(),n=a.getBoundingClientRect().top-t.top,!e.style.position&&n<=40?(e.style.position="fixed",e.style.top=t.top+"px",e.style.marginTop="0"):"fixed"===e.style.position&&40<=n&&(e.style.position="",e.style.top="0",e.style.marginTop="15px")))},r}var Xr,Ur=(Fr=L.a.Component,Object(A.__extends)(Wr,Fr),Wr.prototype.render=function(){var e,t,n=this,i=this.state,a=i.searching,r=i.searchingVersion,o=i.keyword,l=this.props,s=l.me,c=l.teamId,d=l.hideCloseButton,p=void 0!==d&&d,m=l.onError,u=void 0===m?function(){}:m,h=this.props.file,b=this.context,f=b.all,g=b.isLoading,v=b.file,x=b.isEnterpriseAdmin,_=b.isEnterpriseVersion,E=b.isDesktopVersion,w=b.parentFileGuid,k=x||v&&v.permissions.adminManageable,O=v&&v.permissions.collaboratorManageable,y=v&&!E&&!v.isSpace&&v.parentRole,j=E&&w&&"0"!==w,C=f.collabs.length||j||y,S=N?{display:"flex",alignItems:"center"}:{},R=!v||!v.permissions.collaboratorManageable;return L.a.createElement(Mr,null,a?L.a.createElement(Pr,{isMobile:N},L.a.createElement(D,{key:"title-search"},M()("搜索")),L.a.createElement(Hr,{isMobile:N},L.a.createElement(T,{onClick:this.handleBackButtonClick}))):L.a.createElement(Dr,{isMobile:N},h.isSpace?L.a.createElement(D,{key:"title-space",styles:S},M()("协作空间")," ",h.name):h.isFolder?L.a.createElement(D,{key:"title-folder",styles:S},M()("文件夹")," ",h.name):L.a.createElement(D,{key:"title-file",styles:S},(e=h,(t=Pt.a.find(e.type))?t.display:null)," ",h.name),N&&L.a.createElement(Hr,{isMobile:!0},L.a.createElement(T,{onClick:this.handleCollabBackButtonClick}))),!p&&L.a.createElement(Tr,{isMobile:N},L.a.createElement(F,{onClick:this.handleXButtonClick})),L.a.createElement(Ir,{isMobile:N},L.a.createElement(_e,{key:r,isEnterpriseVersion:_,onInput:this.handleInput})),a?L.a.createElement("div",null,L.a.createElement(ir,{key:r,width:"100%",height:N?"100%":"330px",teamId:c,me:s,keyword:o})):L.a.createElement(L.a.Fragment,null,L.a.createElement(Ar,{isMobile:N,innerRef:function(e){return n.wrapper=e},onScroll:this.handleScroll},L.a.createElement(Be,{"data-test":"list_head_add_collab",title:M()("协作者"),buttonText:M()("添加协作者"),showButton:!!O,handleButtonClick:this.handleAddCollabButtonClick,popConfirmTitle:M()("协作者"),popConfirmContent:M()("参与文件协作的成员列表，协作者不能进行移动和删除操作。")}),L.a.createElement(Xe,{width:"100%",height:N?"100%":"310px",wrapperHeight:N?"calc(100% - 28px)":""},L.a.createElement("div",null,L.a.createElement("div",null,g&&L.a.createElement(Vr,null),!g&&(C?L.a.createElement(ia,{me:s,onError:u}):L.a.createElement(zr,null,M()("没有协作者")))),L.a.createElement(Be,{"data-test":"list_head_add_admin",styles:{marginTop:"15px"},title:M()("管理者"),buttonText:M()("添加管理者"),showButton:!!k,handleButtonClick:this.handleAddAdminButtonClick,headRef:this.head,popConfirmTitle:M()("管理者"),popConfirmContent:M()("参与文件管理的成员列表，管理者可以进行移动和删除操作。上级继承的管理者不可被移除。")}),L.a.createElement("div",{ref:this.content},g&&L.a.createElement(Vr,null),!g&&(f.admins.length?L.a.createElement(ja,{onClick:this.handleAddAdminButtonClick,me:s}):L.a.createElement(zr,null,M()("没有管理者"))))))),L.a.createElement(Br,{isMobile:N},L.a.createElement(Lr,{"data-disabled":R},L.a.createElement(Pa,{onClick:this.handleAddCollabButtonClick,disabled:R,"data-test":"collab_button","data-disabled":R})),v&&!Object(or.isDingtalk)()&&!N&&L.a.createElement(Sr,{"data-test":"wechat_button",file:v,me:s}),v&&v.permissions.adminManageable&&h.isSpace&&L.a.createElement(Nr,{"data-test":"setting_button"},L.a.createElement(qa,{onClick:this.handleSettingButtonClick})),L.a.createElement(Rr.a,{path:"shimo.collabPanelFooterHook",data:{refresh:this.context.refresh}}))))},Wr.contextType=gt,Wr),Yr=n(946),Gr=n.n(Yr),Kr="icon_reminder";Object(_.minify)(!1);var qr=_.StyleSheet.create(((Xr={})[Kr]={display:"inline-block",verticalAlign:"middle",marginRight:"5px"},Xr));function Jr(e){var t=e.style,n=void 0===t?{}:t;return L.a.createElement("img",{src:Gr.a,height:"12",width:"12",className:Object(_.css)(qr[Kr]),style:n})}Object(_.minify)(!1);function Zr(e){var t=e.dropdownMode?Object(_.css)(Qr.wrapper,Qr.dropdownWrapper):Object(_.css)(Qr.wrapper);return B.createElement("div",{className:t},B.createElement(Jr,null),M()("您的企业存在「钉钉外部成员」，全员协作不包括此类成员。"),B.createElement("a",{className:Object(_.css)(Qr.link),href:"https://shimo.im/docs/DyYzE9pmdokopM39",target:"_blank",rel:"noreferrer noopener"},M()("> 了解更多")))}var $r,Qr=_.StyleSheet.create({wrapper:{width:"450px",height:"40px",borderRadius:"2px",border:"solid 1px #e5e5e5",backgroundColor:" #f7f7f7",color:"#a5a5a5",fontSize:"12px",lineHeight:"40px",bottom:"-39px",left:"40px",position:"absolute",textAlign:"center"},dropdownWrapper:{bottom:"-43px"},link:{color:"#6da0e3"}}),eo=a.a.div(Object(A.__makeTemplateObject)(["\n  display: block;\n  position: relative;\n  height: ",";\n"],["\n  display: block;\n  position: relative;\n  height: ",";\n"]),function(e){return e.isMobile?"100%":"auto"}),to=a.a.div(Object(A.__makeTemplateObject)(["\n  position: relative;\n  padding: ",";\n"],["\n  position: relative;\n  padding: ",";\n"]),function(e){return e.isMobile?"0 10px":"0 40px"}),no=a.a.div(Object(A.__makeTemplateObject)(["\n  display: inline-block;\n  position: relative;\n  z-index: 1;\n  padding: 6px 5px;\n  border-bottom: ",";\n  color: ",";\n  cursor: pointer;\n"],["\n  display: inline-block;\n  position: relative;\n  z-index: 1;\n  padding: 6px 5px;\n  border-bottom: ",";\n  color: ",";\n  cursor: pointer;\n"]),function(e){return e.selected?"1px solid #555":"1px solid #ddd"},function(e){return e.selected?"#333":"#a5a5a5"}),io=a.a.span(Object(A.__makeTemplateObject)(["\n  display: inline-block;\n  width: 4px;\n  height: 100%;\n"],["\n  display: inline-block;\n  width: 4px;\n  height: 100%;\n"])),ao=a.a.div(Object(A.__makeTemplateObject)(["\n  position: absolute;\n  left: ",";\n  right: ",";\n  bottom: 0;\n  height: 1px;\n  background-color: #ddd;\n"],["\n  position: absolute;\n  left: ",";\n  right: ",";\n  bottom: 0;\n  height: 1px;\n  background-color: #ddd;\n"]),function(e){return e.isMobile?"0":"40px"},function(e){return e.isMobile?"0":"40px"}),ro=a.a.div(Object(A.__makeTemplateObject)(["\n  height: ",";\n"],["\n  height: ",";\n"]),function(e){return e.isMobile?"calc(100% - 38px)":"auto"}),oo=a.a.div(Object(A.__makeTemplateObject)(["\n  height: ",";\n  display: ",";\n"],["\n  height: ",";\n  display: ",";\n"]),function(e){return e.isMobile?"100%":"auto"},function(e){return e.selected?"block":"none"}),lo=($r=L.a.Component,Object(A.__extends)(so,$r),so.prototype.componentDidMount=function(){var t=this,e=this.props,n=e.items,i=e.teamId;this.setState({items:n.filter(Boolean)}),i&&nt("/teams/"+i+"/members/external").then(function(e){e&&0<e.length?t.setState({hasDingOuters:!0}):t.setState({hasDingOuters:!1})}).catch(function(){t.setState({hasDingOuters:!1})})},so.prototype.render=function(){var r=this,e=this.props,t=e.width,o=void 0===t?"100px":t,n=e.height,l=void 0===n?"200px":n,s=e.dropdownMode,i=this.state,a=i.items,c=i.hasDingOuters;return L.a.createElement(eo,{isMobile:N},L.a.createElement(to,{isMobile:N},a.map(function(e,t){return L.a.createElement(L.a.Fragment,{key:t},L.a.createElement(no,{selected:e.selected,onClick:r.handleTabClick(t),"data-test":e.dataTestName},e.title),L.a.createElement(io,null))}),L.a.createElement(ao,{isMobile:N})),L.a.createElement(ro,{isMobile:N},a.map(function(e,t){if(!r.notRendered(t)&&!e.reload){var n=r.renderCache(t);return L.a.createElement(oo,{isMobile:N,selected:e.selected,key:t},n)}var i=!Object(Z.isSelfHosted)()&&c&&"departments"===e.type;if(e.selected){var a=L.a.createElement(L.a.Fragment,null,L.a.createElement(Xe,{width:o,height:i?"310px":l,wrapperHeight:N?"100%":""},e.content),i&&L.a.createElement(Zr,{dropdownMode:s}));return r.setCache(t,a),L.a.createElement(oo,{isMobile:N,selected:!0,key:t},a)}return null})))},so);function so(e){var i=$r.call(this,e)||this;return i.cache={},i.handleTabClick=function(n){return function(e){var t=i.state.items;i.setState({items:t.map(function(e,t){return Object(A.__assign)(Object(A.__assign)({},e),{selected:n===t})})})}},i.notRendered=function(e){return!i.cache[e]},i.renderCache=function(e){var t=i.cache[e];return null!=t?t:null},i.setCache=function(e,t){i.cache[e]=t},i.state={items:[],hasDingOuters:!1},i}var co,po=a.a.div(Object(A.__makeTemplateObject)(["\n  margin-top: 9px;\n  height: ",";\n"],["\n  margin-top: 9px;\n  height: ",";\n"]),function(e){return e.isMobile?"calc(100% - 9px)":"auto"}),mo=(co=L.a.Component,Object(A.__extends)(uo,co),uo.prototype.componentDidMount=function(){this.refreshRecents()},uo.prototype.render=function(){var t=this,e=this.props,n=e.admin,i=void 0!==n&&n,a=e.me,r=this.state.recents,o=this.context,l=o.all,s=o.file,c=o.isEnterpriseAdmin,d=i?l.admins:l.admins.concat(l.collabs),p=r.map(function(t){var e=d[Qa()(d,function(e){return e.id===t.id})];return{id:t.id,name:t.name,description:t.email||t.mobileAccount||t.mobile,role:e?e.role:null,isDepartment:!1,isOutsider:t.isOutsider,isInherited:!!e&&e.isInherited,avatar:t.avatar,disabled:"disabled"===t.teamRole||!!e&&e.disabled,email:t.email,teamId:t.teamId}});return s&&L.a.createElement(po,{isMobile:N},p.map(function(e){return i?L.a.createElement(xa,{key:(e.isDepartment?"department_":"person_")+e.id,isDepartment:e.isDepartment,name:e.name,avatar:e.avatar,id:e.id,email:e.email,teamId:e.teamId,description:e.description,permission:e.role,disabled:!s.permissions.adminManageable&&!c||e.isInherited||e.isOutsider,status:e.status,isInherited:e.isInherited||!1,isOutsider:e.isOutsider,isDisabled:e.disabled,isAdmin:s.permissions.adminManageable,onAdd:t.handleAddAdmin(e.id,e.name,e.isDepartment),onRemove:t.handleRemoveAdmin(e.id,e.name,e.isDepartment),withRemoveButton:!0,onRecentRemove:function(){return t.handleRecentRemove(e.id)}}):"admin"===e.role?L.a.createElement(xa,{key:(e.isDepartment?"department_":"person_")+e.id,isDepartment:e.isDepartment,name:e.name,avatar:e.avatar,id:e.id,email:e.email,teamId:e.teamId,description:e.description,permission:e.role,disabled:!0,status:e.status,isDisabled:e.disabled,isInherited:e.isInherited||!1,isAdmin:s.permissions.adminManageable,withRemoveButton:!0,onRecentRemove:function(){return t.handleRecentRemove(e.id)}}):L.a.createElement(xi,{key:(e.isDepartment?"department_":"person_")+e.id,isDepartment:e.isDepartment,name:e.name,avatar:e.avatar,id:e.id,email:e.email,teamId:e.teamId,description:e.description,permission:e.role,disabled:!s.permissions.collaboratorManageable,status:e.status,isSelf:e.id===a.id&&!e.isDepartment,isOutsider:e.isOutsider,isDisabled:e.disabled,onChange:t.handleChangeCollab(e.id,e.name,e.isDepartment),onRemove:t.handleRemoveCollab(e.id,e.name,e.isDepartment),withRemoveButton:!0,onRecentRemove:function(){return t.handleRecentRemove(e.id)}})}))},uo.contextType=gt,uo);function uo(){var s=null!==co&&co.apply(this,arguments)||this;return s.state={recents:[]},s.handleAddAdmin=function(t,n,i){return function(){var e=s.context.file;e&&(i?Ki(_a(e.guid,t),n).then(s.refreshList):Ki(wa(e.guid,t),n).then(s.refreshList))}},s.handleRemoveAdmin=function(t,n,i){return function(){var e=s.context.file;e&&(i?qi(Ea(e.guid,t),n).then(s.refreshList):qi(ka(e.guid,t),n).then(s.refreshList))}},s.handleChangeCollab=function(r,o,l){return function(e,t){var n,i=s.context.file,a=t?"patch":"post";i&&(n=i.guid,l?"edit"===e?Ji(Xi(n,r),o).then(s.refreshList):"comment"===e?$i(Fi(n,r),o).then(s.refreshList):"read"===e?Zi(Wi(n,r),o).then(s.refreshList):"none"===e&&Qi(Ui(n,r),o).then(s.refreshList):"edit"===e?Ji(Hi(n,r,a),o).then(s.refreshList):"comment"===e?$i(Ni(n,r,a),o).then(s.refreshList):"read"===e?Zi(Pi(n,r,a),o).then(s.refreshList):"none"===e&&Qi(zi(n,r,a),o).then(s.refreshList))}},s.handleRemoveCollab=function(n,i,a){return function(){var e,t=s.context.file;t&&(e=t.guid,a?ea(Yi(e,n),i).then(s.refreshList):ea(Vi(e,n),i).then(s.refreshList))}},s.refreshList=function(){(0,s.context.refresh)()},s.handleRecentRemove=function(e){ot("/users/me/recent_contacts/"+e).then(function(){s.refreshRecents()},function(e){})},s.refreshRecents=function(){(function(t){return Object(A.__awaiter)(this,void 0,void 0,function(){return Object(A.__generator)(this,function(e){switch(e.label){case 0:return[4,at(t?"/search?type=recent_contact&pageSize=-1&teamId="+t:"/search?type=recent_contact&pageSize=-1",{keyword:"*"}).then(function(e){return e.recent_contact.results})];case 1:return[2,e.sent()]}})})})(s.props.teamId).then(function(e){s.setState({recents:e})})},s}Object(_.minify)(!1);var ho,bo=_.StyleSheet.create({member_list:{marginTop:"9px"}}),fo=(ho=L.a.Component,Object(A.__extends)(go,ho),go.prototype.componentDidMount=function(){var t=this;ut().then(function(e){t.setState({members:e})}),this.watchNextPage()},go.prototype.render=function(){var t=this,e=this.props,n=e.admin,i=void 0!==n&&n,a=e.me,r=this.state.members,o=this.context,l=o.all,s=o.file,c=o.isEnterpriseAdmin,d=i?l.admins:l.collabs.concat(l.admins),p=r.map(function(t){var e=d[Qa()(d,function(e){return e.id===t.id})];return{id:t.id,name:t.name,description:e?e.description:t.email||t.mobileAccount||t.mobile,role:e?e.role:null,isDepartment:!1,isOutsider:!1,isInherited:!!e&&e.isInherited,avatar:t.avatar,disabled:"disabled"===t.teamRole||!!e&&e.disabled,email:t.email,teamId:t.teamId}});return s&&L.a.createElement("div",{className:Object(_.css)(bo.member_list),ref:this.memberListRef},p.map(function(e){return i?L.a.createElement(xa,{key:(e.isDepartment?"department_":"person_")+e.id,isDepartment:e.isDepartment,name:e.name,id:e.id,email:e.email,teamId:e.teamId,avatar:e.avatar,description:e.description,permission:e.role,disabled:!s.permissions.adminManageable&&!c||e.isInherited,status:e.status,isInherited:e.isInherited||!1,isSelf:a.id===e.id&&!e.isDepartment,isDisabled:e.disabled,isAdmin:s.permissions.adminManageable,onAdd:t.handleAddAdmin(e.id,e.name,e.isDepartment),onRemove:t.handleRemoveAdmin(e.id,e.name,e.isDepartment)}):"admin"===e.role?L.a.createElement(xa,{key:(e.isDepartment?"department_":"person_")+e.id,isDepartment:e.isDepartment,name:e.name,id:e.id,email:e.email,teamId:e.teamId,avatar:e.avatar,description:e.description,permission:e.role,disabled:!0,status:e.status,isInherited:e.isInherited||!1,isDisabled:e.disabled,isSelf:a.id===e.id&&!e.isDepartment,isAdmin:s.permissions.adminManageable}):L.a.createElement(xi,{key:(e.isDepartment?"department_":"person_")+e.id,isDepartment:e.isDepartment,name:e.name,id:e.id,email:e.email,teamId:e.teamId,avatar:e.avatar,description:e.description,permission:e.role,isSelf:a.id===e.id&&!e.isDepartment,disabled:!s.permissions.collaboratorManageable,status:e.status,isDisabled:e.disabled,onChange:t.handleChangeCollab(e.id,e.name,e.isDepartment),onRemove:t.handleRemoveCollab(e.id,e.name,e.isDepartment)})}))},go.contextType=gt,go);function go(){var s=null!==ho&&ho.apply(this,arguments)||this;return s.state={members:[]},s.memberListRef=L.a.createRef(),s.currentPage=2,s.handleAddAdmin=function(t,n,i){return function(){var e=s.context.file;e&&(i?Ki(_a(e.guid,t),n).then(s.refreshList):Ki(wa(e.guid,t),n).then(s.refreshList))}},s.handleRemoveAdmin=function(t,n,i){return function(){var e=s.context.file;e&&(i?qi(Ea(e.guid,t),n).then(s.refreshList):qi(ka(e.guid,t),n).then(s.refreshList))}},s.handleChangeCollab=function(r,o,l){return function(e,t){var n,i,a=s.context.file;a&&(n=a.guid,i=t?"patch":"post",l?"edit"===e?Ji(Xi(n,r),o).then(s.refreshList):"comment"===e?$i(Fi(n,r),o).then(s.refreshList):"read"===e?Zi(Wi(n,r),o).then(s.refreshList):"none"===e&&Qi(Ui(n,r),o).then(s.refreshList):"edit"===e?Ji(Hi(n,r,i),o).then(s.refreshList):"comment"===e?$i(Ni(n,r,i),o).then(s.refreshList):"read"===e?Zi(Pi(n,r,i),o).then(s.refreshList):"none"===e&&Qi(zi(n,r,i),o).then(s.refreshList))}},s.handleRemoveCollab=function(n,i,a){return function(){var e,t=s.context.file;t&&(e=t.guid,a?ea(Yi(e,n),i).then(s.refreshList):ea(Vi(e,n),i).then(s.refreshList))}},s.refreshList=function(){return Object(A.__awaiter)(s,void 0,void 0,function(){return Object(A.__generator)(this,function(e){return(0,this.context.refresh)(),[2]})})},s.watchNextPage=function(){-1!==s.currentPage&&setTimeout(function(){return Object(A.__awaiter)(s,void 0,void 0,function(){var t,n,i,a=this;return Object(A.__generator)(this,function(e){switch(e.label){case 0:return(t=this.memberListRef.current)&&t.parentElement?(n=t.parentElement,i=function(){return Object(A.__awaiter)(a,void 0,void 0,function(){var t,n;return Object(A.__generator)(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,ut(this.currentPage)];case 1:return t=e.sent(),[3,3];case 2:return e.sent(),t=[],[3,3];case 3:return n=this.state.members,t.length<=0?this.currentPage=-1:(this.setState({members:n.concat(t)}),this.currentPage++),[2]}})})},t.clientHeight<n.clientHeight?[4,i()]:[3,2]):[3,4];case 1:return e.sent(),[3,4];case 2:return n.scrollTop+n.clientHeight>.5*n.scrollHeight?[4,i()]:[3,4];case 3:e.sent(),e.label=4;case 4:return setTimeout(this.watchNextPage,100),[2]}})})},0)},s}function vo(){return L.a.createElement(xo,null)}var xo=a.a.div(Object(A.__makeTemplateObject)(["\n  display: inline-block;\n  width: 10px;\n  height: 100%;\n  vertical-align: middle;\n  flex-shrink: 0;\n"],["\n  display: inline-block;\n  width: 10px;\n  height: 100%;\n  vertical-align: middle;\n  flex-shrink: 0;\n"]));Object(_.minify)(!1);var _o,Eo=_.StyleSheet.create({empty:{display:"inline-block",height:"44px",lineHeight:"44px",width:"200px",overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",marginLeft:"7px"},empty_text:{color:"grey"}}),wo=(_o=L.a.Component,Object(A.__extends)(ko,_o),ko.prototype.render=function(){var e=this.props.parentLevel;return L.a.createElement("div",{className:Object(_.css)(Eo.empty)},Array.apply(null,{length:e}).map(Function.call,Number).map(function(e){return L.a.createElement(vo,{key:e})}),L.a.createElement("span",{className:Object(_.css)(Eo.empty_text)},M()("（无下级部门）")))},ko);function ko(){return null!==_o&&_o.apply(this,arguments)||this}var Oo,yo=n(947),jo=n.n(yo),Co="icon_enterprise";Object(_.minify)(!1);var So=_.StyleSheet.create(((Oo={})[Co]={display:"inline-block",verticalAlign:"middle"},Oo));function Ro(e){var t=e.style,n=void 0===t?{}:t;return L.a.createElement("img",{src:jo.a,height:"28",width:"28",className:Object(_.css)(So[Co]),style:n})}Object(_.minify)(!1);var Mo,Do=_.StyleSheet.create({collapsed_button_wrapper:{display:"inline-block",width:"12px",height:"12px",lineHeight:"12px",overflow:"hidden",verticalAlign:"middle"},collapsed_button:{display:"inline-block",width:"0px",height:"0px",borderTop:"5px solid transparent",borderLeft:"5px solid rgba(85, 85, 85, 0.7)",borderBottom:"5px solid transparent",borderRight:"5px solid transparent",verticalAlign:"middle",transform:"scaleX(1.4) translate(3px, -1px)"}}),To=(Mo=L.a.Component,Object(A.__extends)(Io,Mo),Io.prototype.render=function(){return L.a.createElement("div",{className:Object(_.css)(Do.collapsed_button_wrapper)},L.a.createElement("div",{className:Object(_.css)(Do.collapsed_button)}))},Io);function Io(){return null!==Mo&&Mo.apply(this,arguments)||this}Object(_.minify)(!1);var Ao,Bo=_.StyleSheet.create({expanded_button:{display:"inline-block",width:"12px",height:"12px",lineHeight:"12px",overflow:"hidden",verticalAlign:"middle",transform:"rotate(90deg)"}}),Lo=(Ao=L.a.Component,Object(A.__extends)(No,Ao),No.prototype.render=function(){return L.a.createElement("div",{className:Object(_.css)(Bo.expanded_button)},L.a.createElement(To,null))},No);function No(){return null!==Ao&&Ao.apply(this,arguments)||this}var Po,Ho=a.a.div(Object(A.__makeTemplateObject)(["\n  display: flex;\n"],["\n  display: flex;\n"])),zo=a.a.span(Object(A.__makeTemplateObject)(["\n  margin-left: 8px;\n  flex: 1 1 auto;\n  width: 10px;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n"],["\n  margin-left: 8px;\n  flex: 1 1 auto;\n  width: 10px;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n"])),Vo=a.a.div(Object(A.__makeTemplateObject)(["\n  display: flex;\n  height: 44px;\n  line-height: 44px;\n  width: 361px;\n"],["\n  display: flex;\n  height: 44px;\n  line-height: 44px;\n  width: 361px;\n"])),Fo=a.a.div(Object(A.__makeTemplateObject)(["\n  display: flex;\n  cursor: pointer;\n  align-items: center;\n  flex: 1 1 auto;\n"],["\n  display: flex;\n  cursor: pointer;\n  align-items: center;\n  flex: 1 1 auto;\n"])),Wo=a.a.div(Object(A.__makeTemplateObject)(["\n  display: inline-block;\n  height: 44px;\n  line-height: 44px;\n  width: 100px;\n"],["\n  display: inline-block;\n  height: 44px;\n  line-height: 44px;\n  width: 100px;\n"])),Xo=(Po=L.a.Component,Object(A.__extends)(Uo,Po),Uo.prototype.render=function(){var e=this.props,t=e.permission,n=e.admin,i=void 0!==n&&n,a=e.expanded,r=e.disabled,o=void 0!==r&&r,l=e.isInherited,s=void 0!==l&&l,c=e.isAdmin;return L.a.createElement(Ho,{"data-test":"enterprise"},L.a.createElement(Vo,{"data-test":"enterprise-left-part"},L.a.createElement(Fo,{onClick:this.handleClick},a?L.a.createElement(Lo,null):L.a.createElement(To,null),L.a.createElement(Ro,{style:{marginLeft:"3px"}}),L.a.createElement(zo,{"data-test":"enterprise-text"},M()("企业全员")))),L.a.createElement(Wo,{"data-test":"enterprise-right-part"},i?L.a.createElement(ga,{name:M()("企业全员"),disabled:o,isInherited:s,isAdmin:c,isDepartment:!0,isEnterprise:!0,permission:"admin"!==t?null:"admin",onAdd:this.handleAddAdmin,onRemove:this.handleRemoveAdmin}):L.a.createElement(gi,{disabled:o,permission:t,isDepartment:!0,onChange:this.handleChangeCollab,onRemove:this.handleRemoveCollab,name:M()("企业全员"),isEnterprise:!0})))},Uo);function Uo(){var n=null!==Po&&Po.apply(this,arguments)||this;return n.handleClick=function(e){var t=n.props.onClick;null!=t&&t()},n.handleAddAdmin=function(){var e=n.props.onAddAdmin;null!=e&&e()},n.handleRemoveAdmin=function(){var e=n.props.onRemoveAdmin;null!=e&&e()},n.handleChangeCollab=function(e){var t=n.props.onChangeCollab;null!=t&&t(e)},n.handleRemoveCollab=function(){var e=n.props.onRemoveCollab;null!=e&&e()},n}var Yo,Go=a.a.div(Object(A.__makeTemplateObject)(["\n  display: flex;\n"],["\n  display: flex;\n"])),Ko=a.a.span(Object(A.__makeTemplateObject)(["\n  margin-left: 8px;\n  flex: 1 1 auto;\n  width: 10px;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n"],["\n  margin-left: 8px;\n  flex: 1 1 auto;\n  width: 10px;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n"])),qo=a.a.div(Object(A.__makeTemplateObject)(["\n  display: flex;\n  height: 44px;\n  line-height: 44px;\n  width: 361px;\n"],["\n  display: flex;\n  height: 44px;\n  line-height: 44px;\n  width: 361px;\n"])),Jo=a.a.div(Object(A.__makeTemplateObject)(["\n  display: flex;\n  cursor: pointer;\n  align-items: center;\n  flex: 1 1 auto;\n"],["\n  display: flex;\n  cursor: pointer;\n  align-items: center;\n  flex: 1 1 auto;\n"])),Zo=a.a.div(Object(A.__makeTemplateObject)(["\n  display: inline-block;\n  height: 44px;\n  line-height: 44px;\n  width: 100px;\n"],["\n  display: inline-block;\n  height: 44px;\n  line-height: 44px;\n  width: 100px;\n"])),$o=(Yo=L.a.Component,Object(A.__extends)(Qo,Yo),Qo.prototype.render=function(){var e=this.props,t=e.level,n=e.title,i=e.expanded,a=void 0!==i&&i;return L.a.createElement(Go,{"data-test":"department"},L.a.createElement(qo,{"data-test":"left-part"},Object(A.__spread)(new Array(t)).map(function(e,t){return L.a.createElement(vo,{key:t})}),L.a.createElement(Jo,{onClick:this.handleClick,"data-test":"left-clickable-area"},a?L.a.createElement(Lo,null):L.a.createElement(To,null),L.a.createElement(Mn,{style:{marginLeft:"3px"}}),L.a.createElement(Ko,{title:n,"data-test":"department-text"},n))),L.a.createElement(Zo,{"data-test":"right-part"},this.renderItem()))},Qo);function Qo(){var d=null!==Yo&&Yo.apply(this,arguments)||this;return d.handleClick=function(e){var t=d.props.onClick;null!=t&&t()},d.handleAddAdmin=function(){var e=d.props.onAddAdmin;null!=e&&e()},d.handleRemoveAdmin=function(){var e=d.props.onRemoveAdmin;null!=e&&e()},d.handleChangeCollab=function(e){var t=d.props.onChangeCollab;null!=t&&t(e)},d.handleRemoveCollab=function(){var e=d.props.onRemoveCollab;null!=e&&e()},d.renderItem=function(){var e=d.props,t=e.permission,n=e.admin,i=void 0!==n&&n,a=e.title,r=e.disabled,o=void 0!==r&&r,l=e.isInherited,s=void 0!==l&&l,c=e.isAdmin;return i?L.a.createElement(ga,{name:a,disabled:o,isInherited:s,isAdmin:c,isDepartment:!0,permission:"admin"!==t?null:t,onAdd:d.handleAddAdmin,onRemove:d.handleRemoveAdmin}):"admin"===t?L.a.createElement(ga,{name:a,disabled:!0,isInherited:s,isAdmin:c,isDepartment:!0,permission:"admin"!==t?null:t}):L.a.createElement(gi,{disabled:o,permission:t,onChange:d.handleChangeCollab,onRemove:d.handleRemoveCollab,isDepartment:!0,name:a})},d}var el=a.a.div(Object(A.__makeTemplateObject)(["\n  margin-top: 9px;\n"],["\n  margin-top: 9px;\n"])),tl=a.a.div(Object(A.__makeTemplateObject)(["\n  padding-left: ",";\n  padding-right: ",";\n\n  &:hover {\n    background-color: #f7f7f7;\n  }\n"],["\n  padding-left: ",";\n  padding-right: ",";\n\n  &:hover {\n    background-color: #f7f7f7;\n  }\n"]),function(e){return e.isMobile?"10px":"45px"},function(e){return e.isMobile?"10px":"0"});function nl(e,t){if(0===t)return!1;var n,i,a=(n=t,i=Qa()(e,function(e){return e.id===n}),e[i]?e[i]:{expanded:!0});return!a.expanded||nl(e,a.parentId)}var il,al=(il=L.a.Component,Object(A.__extends)(rl,il),rl.prototype.componentDidMount=function(){var t=this;(function(){return Object(A.__awaiter)(this,void 0,void 0,function(){var t,n;return Object(A.__generator)(this,function(e){switch(e.label){case 0:return[4,nt("/departments/1/shadow_subtree")];case 1:return t=e.sent(),[2,[{id:(n=t.currentDepartment).id,isInherited:!1,name:n.name,role:null,level:-1,expanded:!1,parentId:0}].concat(t.subdepartments.map(function(e){return{id:e.id,isInherited:!1,name:e.name,role:null,level:-1,expanded:!1,parentId:1}}))]}})})})().then(function(e){t.setState({departments:e.map(function(e){return 1===e.id?Object(A.__assign)(Object(A.__assign)({},e),{expanded:!0}):Object(A.__assign)(Object(A.__assign)({},e),{level:1,expanded:!1})})})})},rl.prototype.render=function(){var t=this,e=this.props.admin,n=void 0!==e&&e,i=this.state.departments,a=this.context,r=a.all,o=a.file,l=n?r.admins:r.admins.concat(r.collabs),s=i.map(function(t){var e=l[Qa()(l,function(e){return e.id===t.id&&e.isDepartment})];return{expanded:t.expanded,id:t.id,isInherited:!!e&&e.isInherited,level:t.level,name:t.name,role:e?e.role:null,parentId:t.parentId}});return o&&L.a.createElement(el,null,s.map(function(e){return e.id<0?nl(s,e.parentId)?null:L.a.createElement(tl,{isMobile:N,key:e.id},L.a.createElement(wo,{parentLevel:e.level})):1===e.id?L.a.createElement(tl,{isMobile:N,key:e.id},L.a.createElement(Xo,{permission:e.role,admin:n,expanded:e.expanded,disabled:e.isInherited||!o.permissions.collaboratorManageable,isInherited:e.isInherited,isAdmin:o.permissions.adminManageable,onClick:t.handleDepartmentClick(e.id,e.level,e.expanded),onAddAdmin:t.handleAddAdmin(e.id,e.name),onRemoveAdmin:t.handleRemoveAdmin(e.id,e.name),onChangeCollab:t.handleChangeCollab(e.id,e.name),onRemoveCollab:t.handleRemoveCollab(e.id,e.name)})):nl(s,e.parentId)?null:L.a.createElement(tl,{isMobile:N,key:e.id},L.a.createElement($o,{level:e.level,admin:n,permission:e.role,expanded:e.expanded,disabled:e.isInherited||!o.permissions.collaboratorManageable,isInherited:e.isInherited,isAdmin:o.permissions.adminManageable,title:e.name,onClick:t.handleDepartmentClick(e.id,e.level,e.expanded),onAddAdmin:t.handleAddAdmin(e.id,e.name),onRemoveAdmin:t.handleRemoveAdmin(e.id,e.name),onChangeCollab:t.handleChangeCollab(e.id,e.name),onRemoveCollab:t.handleRemoveCollab(e.id,e.name)}))}).filter(Boolean))},rl.contextType=gt,rl);function rl(){var m=null!==il&&il.apply(this,arguments)||this;return m.state={departments:[]},m.expandedCache={1:!0},m.handleDepartmentClick=function(c,d,p){return function(){var e,t,n,i,a,r,l=m.state.departments,s=Qa()(l,function(e){return e.id===c});p&&m.setState({departments:(n=(e=l)[t=s],Object(A.__spread)(e.slice(0,t),[Object(A.__assign)(Object(A.__assign)({},n),{expanded:!1})],e.slice(t+1)))}),!p&&m.expandedCache[c]&&m.setState({departments:(r=(i=l)[a=s],Object(A.__spread)(i.slice(0,a),[Object(A.__assign)(Object(A.__assign)({},r),{expanded:!0})],i.slice(a+1)))}),p||m.expandedCache[c]||function(t){return void 0===t&&(t=1),Object(A.__awaiter)(this,void 0,void 0,function(){return Object(A.__generator)(this,function(e){switch(e.label){case 0:return[4,nt("/departments/"+t+"/shadow_subtree")];case 1:return[2,e.sent().subdepartments.map(function(e){return{id:e.id,isInherited:!1,name:e.name,role:null,level:-1,expanded:!1,parentId:t}})]}})})}(c).then(function(e){var t,n,i,a,r,o;m.expandedCache[c]=!0,m.setState({departments:(t=l,n=e,i=p,a=d,r=s,o=c,Object(A.__spread)(t.slice(0,r),[Object(A.__assign)(Object(A.__assign)({},t[r]),{expanded:!i})],0<n.length?n.map(function(e){return Object(A.__assign)(Object(A.__assign)({},e),{level:a+1})}):[{id:-1*Date.now(),name:"",role:null,level:a,expanded:!1,isInherited:!1,parentId:o}],t.slice(r+1)))})})}},m.handleAddAdmin=function(t,n){return function(){var e=m.context.file;e&&Ki(_a(e.guid,t),n).then(m.refreshList())}},m.handleRemoveAdmin=function(t,n){return function(){var e=m.context.file;e&&qi(Ea(e.guid,t),n).then(m.refreshList())}},m.handleChangeCollab=function(i,a){return function(e){var t,n=m.context.file;n&&(t=n.guid,"edit"===e?Ji(Xi(t,i),a).then(m.refreshList()):"comment"===e?$i(Fi(t,i),a).then(m.refreshList()):"none"===e?Qi(Ui(t,i),a).then(m.refreshList()):"read"===e&&Zi(Wi(t,i),a).then(m.refreshList()))}},m.handleRemoveCollab=function(t,n){return function(){var e=m.context.file;e&&ea(Yi(e.guid,t),n).then(m.refreshList())}},m.refreshList=function(){return function(){(0,m.context.refresh)()}},m}var ol,ll=a.a.div(Object(A.__makeTemplateObject)(["\n  display: inline-block;\n  width: 100%;\n  height: 100%;\n  position: relative;\n"],["\n  display: inline-block;\n  width: 100%;\n  height: 100%;\n  position: relative;\n"])),sl=a.a.div(Object(A.__makeTemplateObject)(["\n  height: 40px;\n  line-height: 18px;\n  padding: ",";\n  text-align: center;\n  font-size: 16px;\n"],["\n  height: 40px;\n  line-height: 18px;\n  padding: ",";\n  text-align: center;\n  font-size: 16px;\n"]),function(e){return e.isMobile?"7px 10px 0":"7px 40px 0 44px"}),cl=a.a.div(Object(A.__makeTemplateObject)(["\n  position: absolute;\n  top: 8px;\n  left: ",";\n"],["\n  position: absolute;\n  top: 8px;\n  left: ",";\n"]),function(e){return e.isMobile?"15px":"50px"}),dl=a.a.div(Object(A.__makeTemplateObject)(["\n  position: absolute;\n  right: 48px;\n  top: 5px;\n  display: ",";\n"],["\n  position: absolute;\n  right: 48px;\n  top: 5px;\n  display: ",";\n"]),function(e){return e.isMobile?"none":"block"}),pl=a.a.div(Object(A.__makeTemplateObject)(["\n  height: 35px;\n  margin-bottom: 12px;\n  padding: ",";\n"],["\n  height: 35px;\n  margin-bottom: 12px;\n  padding: ",";\n"]),function(e){return e.isMobile?"0 10px":"0 40px"}),ml=a.a.div(Object(A.__makeTemplateObject)(["\n  margin-bottom: ",";\n  height: ",";\n"],["\n  margin-bottom: ",";\n  height: ",";\n"]),function(e){return e.isMobile?"0":"10px"},function(e){return e.isMobile?"calc(100% - 94px)":"auto"}),ul=a.a.div(Object(A.__makeTemplateObject)(["\n  position: absolute;\n  top: 8px;\n  left: ",";\n"],["\n  position: absolute;\n  top: 8px;\n  left: ",";\n"]),function(e){return e.isMobile?"15px":"50px"});function hl(){var i=null!==ol&&ol.apply(this,arguments)||this;return i.state={searching:!1,searchingVersion:1,keyword:""},i.handleBackButtonClick=function(n){return function(){var e,t;n?(e=i.state.searchingVersion,i.setState({searching:!1,searchingVersion:e+1,keyword:""})):(t=i.props.onBackButtonClick)&&t()}},i.handleInput=function(e){var t=i.state.searching;0<e.length?i.setState({searching:!0,keyword:e}):t&&i.setState({searching:!1,keyword:""})},i.handleXButtonClick=function(){var e=i.props.onXButtonClick;e&&e()},i}var bl,fl=(ol=L.a.Component,Object(A.__extends)(hl,ol),hl.prototype.render=function(){var e=this.state,t=e.searching,n=e.searchingVersion,i=e.keyword,a=this.props,r=a.teamId,o=a.me,l=a.hideCloseButton,s=void 0!==l&&l,c=this.context,d=c.file,p=c.isEnterpriseVersion,m=c.isDesktopVersion;return d&&L.a.createElement(ll,null,L.a.createElement(sl,{isMobile:N},t?L.a.createElement(D,null,M()("搜索")):L.a.createElement(D,null,M()("添加管理者"))),t?L.a.createElement(ul,{isMobile:N},L.a.createElement(T,{onClick:this.handleBackButtonClick(!0)})):L.a.createElement(cl,{isMobile:N},L.a.createElement(T,{onClick:this.handleBackButtonClick(!1)})),!s&&L.a.createElement(dl,{isMobile:N},L.a.createElement(F,{onClick:this.handleXButtonClick})),L.a.createElement(pl,{isMobile:N},L.a.createElement(_e,{isEnterpriseVersion:p,key:n,onInput:this.handleInput})),t?L.a.createElement(ir,{key:n,width:"100%",height:N?"100%":"370px",admin:!0,teamId:r,me:o,keyword:i}):L.a.createElement(ml,{isMobile:N},L.a.createElement(lo,{teamId:r,dropdownMode:s,items:[{title:M()("最近"),selected:!0,content:L.a.createElement(mo,{admin:!0,teamId:r,me:o}),dataTestName:"admin_tab_recent"},p?{title:M()("企业全员"),content:L.a.createElement(fo,{admin:!0,teamId:r,me:o}),dataTestName:"admin_tab_members"}:null,p&&!m?{title:M()("组织"),type:"departments",content:L.a.createElement(al,{admin:!0,teamId:r,me:o}),dataTestName:"admin_tab_departments"}:null],width:"100%",height:N?"100%":"354px"})))},hl.contextType=gt,hl);function gl(){var i=null!==bl&&bl.apply(this,arguments)||this;return i.state={searching:!1,searchingVersion:1,keyword:""},i.handleBackButtonClick=function(n){return function(){var e,t;n?(e=i.state.searchingVersion,i.setState({searching:!1,searchingVersion:e+1,keyword:""})):(t=i.props.onBackButtonClick)&&t()}},i.handleInput=function(e){var t=i.state.searching;0<e.length?i.setState({searching:!0,keyword:e}):t&&i.setState({searching:!1,keyword:""})},i.handleXButtonClick=function(){var e=i.props.onXButtonClick;e&&e()},i}var vl=(bl=L.a.Component,Object(A.__extends)(gl,bl),gl.prototype.render=function(){var e=this.state,t=e.searching,n=e.searchingVersion,i=e.keyword,a=this.props,r=a.teamId,o=a.me,l=a.hideCloseButton,s=void 0!==l&&l,c=a.isEnterpriseVersion,d=a.isDesktopVersion;return L.a.createElement(ll,null,L.a.createElement(sl,{isMobile:N},t?L.a.createElement(D,null,M()("搜索")):L.a.createElement(D,null,M()("添加协作者"))),t?L.a.createElement(ul,{isMobile:N},L.a.createElement(T,{onClick:this.handleBackButtonClick(!0)})):L.a.createElement(cl,{isMobile:N},L.a.createElement(T,{onClick:this.handleBackButtonClick(!1)})),!s&&L.a.createElement(dl,{isMobile:N},L.a.createElement(F,{onClick:this.handleXButtonClick})),L.a.createElement(pl,{isMobile:N},L.a.createElement(_e,{key:n,isEnterpriseVersion:c,onInput:this.handleInput})),t?L.a.createElement(ir,{key:n,width:"100%",height:N?"100%":"370px",teamId:r,me:o,keyword:i}):L.a.createElement(ml,{isMobile:N},L.a.createElement(lo,{teamId:r,dropdownMode:s,items:[{title:M()("最近"),selected:!0,content:L.a.createElement(mo,{teamId:r,me:o}),dataTestName:"collab_tab_recent"},c?{title:M()("企业全员"),content:L.a.createElement(fo,{teamId:r,me:o}),dataTestName:"collab_tab_members"}:null,c&&!d?{title:M()("组织"),type:"departments",content:L.a.createElement(al,{teamId:r,me:o}),dataTestName:"collab_tab_departments"}:null],width:"100%",height:N?"100%":"354px"})))},gl.contextType=gt,gl);Object(_.minify)(!1);function xl(){var e=Object(A.__read)(Object(B.useState)(function(){return"hidden"===localStorage.getItem("collabPanelTipState")||!1}),2),t=e[0],n=e[1];return t?null:L.a.createElement("div",{className:Object(_.css)(El.tip_bar),style:{display:t?"none":"flex"}},M()("「我的桌面」功能升级中，"),L.a.createElement("span",{className:Object(_.css)(El.tip_bar_link),onClick:function(){window.open("https://shimo.im/docs/r4ArzoRNwWUYFgAV/ ")}},M()("点击查看详情")),M()("或"),L.a.createElement("span",{className:Object(_.css)(El.tip_bar_link),onClick:function(){localStorage.setItem("collabPanelTipState","hidden"),n(!0)}},M()("不再提示")))}var _l,El=_.StyleSheet.create({tip_bar:{textAlign:"center",backgroundColor:"#e2ecf9",color:"#666",height:"40px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"default",fontSize:"12px"},tip_bar_link:{textDecoration:"underline",cursor:"pointer"}}),wl=a.a.div(Object(A.__makeTemplateObject)(["\n  display: inline-block;\n  width: ",";\n  height: ",";\n  padding: ",";\n  background-color: white;\n  font-size: 12px;\n  -webkit-tap-highlight-color: transparent;\n  box-sizing: ",";\n"],["\n  display: inline-block;\n  width: ",";\n  height: ",";\n  padding: ",";\n  background-color: white;\n  font-size: 12px;\n  -webkit-tap-highlight-color: transparent;\n  box-sizing: ",";\n"]),function(e){return e.isMobile?"100%":"530px"},function(e){return e.isMobile?"100%":"480px"},function(e){return e.isMobile?"15px 0 0":"30px 0"},function(e){return e.isMobile?"border-box":"initial"}),kl=(_l=L.a.Component,Object(A.__extends)(Ol,_l),Ol.prototype.render=function(){var e=this.state.currentPage,t=this.props,n=t.isEnterpriseAdmin,i=void 0!==n&&n,a=t.isEnterpriseVersion,r=void 0===a||a,o=t.isDesktopVersion,l=void 0!==o&&o,s=t.parentFileGuid,c=t.file,d=t.me,p=t.teamId,m=t.hideCloseButton,u=void 0!==m&&m,h=t.zIndex,b=t.onError,f=void 0===b?function(e){}:b;return L.a.createElement(vt,{guid:c.guid,isEnterpriseVersion:r,isDesktopVersion:l,isEnterpriseAdmin:i,parentFileGuid:s,zIndex:h,onError:f,me:d,teamId:p},!N&&l&&!Object(Z.isSelfHosted)()&&L.a.createElement(xl,null),L.a.createElement("div",{onMouseEnter:this.handleMouseEnter},"admin"===e&&L.a.createElement(wl,{isMobile:N},L.a.createElement(fl,{onBackButtonClick:this.handleBackButtonClick,teamId:p,me:d,onXButtonClick:this.handleXButtonClick,hideCloseButton:u})),"collab"===e&&L.a.createElement(wl,{isMobile:N},L.a.createElement(vl,{onBackButtonClick:this.handleBackButtonClick,teamId:p,me:d,onXButtonClick:this.handleXButtonClick,hideCloseButton:u,isEnterpriseVersion:r,isDesktopVersion:l})),"main"===e&&L.a.createElement(wl,{isMobile:N},L.a.createElement(Ur,{onAddCollabButtonClick:this.handleAddCollabButtonClick,onAddAdminButtonClick:this.handleAddAdminButtonClick,me:d,file:c,teamId:p,onSettingButtonClick:this.handleSettingButtonClick,onXButtonClick:this.handleXButtonClick,hideCloseButton:u,onError:f}))))},Ol);function Ol(){var t=null!==_l&&_l.apply(this,arguments)||this;return t.state={currentPage:t.props.showAddCollab?"collab":"main",firstTimeLoaded:!0},t.handleAddCollabButtonClick=function(){t.setState({currentPage:"collab"})},t.handleAddAdminButtonClick=function(){t.setState({currentPage:"admin"})},t.handleBackButtonClick=function(){t.setState({currentPage:"main"})},t.handleSettingButtonClick=function(){var e=t.props.onSettingButtonClick;e&&e()},t.handleXButtonClick=function(){var e=t.props.onClose;e&&e()},t.handleMouseEnter=function(e){t.state.firstTimeLoaded&&t.setState({firstTimeLoaded:!1})},t}t.default=kl}}]);
//# sourceMappingURL=collab_panel.1cc50c71.js.map